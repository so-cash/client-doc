import{_ as $e}from"./MarkdownDynamic.vue_vue_type_script_setup_true_lang-xjiyRHzh.js";import{_ as Ue}from"./MarkdownDoc.vue_vue_type_script_setup_true_lang-9a62AM_K.js";import{p as Se,s as Q,i as R,T as o,y as je,X as ve,Y as Ge,g as ze,Z as We,r as E,v as he,w as G,_ as ke,$ as xe,a0 as He,u as Qe,e as u,B as X,a1 as Ye,a2 as Je,a3 as Ve,Q as q,a4 as Xe,a5 as Ze,J as j,d as qe,F as we,a6 as el,o as ll,a7 as Ce,a8 as tl,P as p,L as v,W as L,H as w,a9 as al,M as nl,a as I,aa as ne,ab as ul,ac as ol,K as U,S as sl,c as Ie}from"./index-CIO_qzoH.js";import{m as rl,b as il,c as cl,V as Fe,a as _e,d as dl}from"./VTable-B5-ge3lL.js";import{u as fl,a as vl,t as ee,b as ml,V as ue,f as yl,m as gl,c as bl,d as hl,e as kl,g as me,h as xl,i as Vl}from"./VSelect-bi5I2seg.js";import{h as wl,n as Cl,l as Z,o as Il,f as Fl}from"./VGrid-DvMKmXmU.js";import{a as _l}from"./VChip-DxYvjO-a.js";import{a as fe}from"./VBtn-BR7ZmueS.js";import"./VOverlay-CgokxOfd.js";const Sl=(e,g,s)=>e==null||g==null?-1:e.toString().toLocaleLowerCase().indexOf(g.toString().toLocaleLowerCase()),pl=Se({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function Rl(e,g,s){var m;const i=[],N=(s==null?void 0:s.default)??Sl,h=s!=null&&s.filterKeys?ve(s.filterKeys):!1,C=Object.keys((s==null?void 0:s.customKeyFilter)??{}).length;if(!(e!=null&&e.length))return i;e:for(let x=0;x<e.length;x++){const[V,_=V]=ve(e[x]),M={},f={};let n=-1;if((g||C>0)&&!(s!=null&&s.noFilter)){if(typeof V=="object"){const A=h||Object.keys(_);for(const F of A){const Y=Ge(_,F),z=(m=s==null?void 0:s.customKeyFilter)==null?void 0:m[F];if(n=z?z(Y,g,V):N(Y,g,V),n!==-1&&n!==!1)z?M[F]=n:f[F]=n;else if((s==null?void 0:s.filterMode)==="every")continue e}}else n=N(V,g,V),n!==-1&&n!==!1&&(f.title=n);const b=Object.keys(f).length,O=Object.keys(M).length;if(!b&&!O||(s==null?void 0:s.filterMode)==="union"&&O!==C&&!b||(s==null?void 0:s.filterMode)==="intersection"&&(O!==C||!b))continue}i.push({index:x,matches:{...f,...M}})}return i}function Ml(e,g,s,i){const N=Q([]),h=Q(new Map),C=R(()=>o(g));je(()=>{const x=typeof s=="function"?s():o(s),V=typeof x!="string"&&typeof x!="number"?"":String(x),_=Rl(C.value,V,{customKeyFilter:{...e.customKeyFilter,...o(i==null?void 0:i.customKeyFilter)},default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),M=o(g),f=[],n=new Map;_.forEach(b=>{let{index:O,matches:A}=b;const F=M[O];f.push(F),n.set(F.value,A)}),N.value=f,h.value=n});function m(x){return h.value.get(x.value)}return{filteredItems:N,filteredMatches:h,getMatches:m}}function Al(e,g,s){if(g==null)return e;if(Array.isArray(g))throw new Error("Multiple matches is not implemented");return typeof g=="number"&&~g?u(q,null,[u("span",{class:"v-combobox__unmask"},[e.substr(0,g)]),u("span",{class:"v-combobox__mask"},[e.substr(g,s)]),u("span",{class:"v-combobox__unmask"},[e.substr(g+s)])]):e}const Pl=Se({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:{type:Boolean,default:!0},delimiters:Array,...pl({filterKeys:["title"]}),...gl({hideNoData:!0,returnObject:!0}),...Ye(bl({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...Cl({transition:!1})},"VCombobox"),Dl=ze()({name:"VCombobox",props:Pl(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:search":e=>!0,"update:menu":e=>!0},setup(e,g){var ye;let{emit:s,slots:i}=g;const{t:N}=We(),h=E(),C=Q(!1),m=Q(!0),x=Q(!1),V=E(),_=E(),M=he(e,"menu"),f=R({get:()=>M.value,set:l=>{var r;M.value&&!l&&((r=V.value)!=null&&r.Î¨openChildren.size)||(M.value=l)}}),n=Q(-1);let b=!1;const O=R(()=>{var l;return(l=h.value)==null?void 0:l.color}),A=R(()=>f.value?e.closeText:e.openText),{items:F,transformIn:Y,transformOut:z}=fl(e),{textColorClasses:oe,textColorStyles:se}=wl(O),t=he(e,"modelValue",[],l=>Y(ve(l)),l=>{const r=z(l);return e.multiple?r:r[0]??null}),a=vl(e),$=R(()=>!!(e.chips||i.chip)),T=R(()=>$.value||!!i.selection),B=Q(!e.multiple&&!T.value?((ye=t.value[0])==null?void 0:ye.title)??"":""),c=R({get:()=>B.value,set:l=>{var r;if(B.value=l??"",!e.multiple&&!T.value&&(t.value=[ee(e,l)]),l&&e.multiple&&((r=e.delimiters)!=null&&r.length)){const k=l.split(new RegExp(`(?:${e.delimiters.join("|")})+`));k.length>1&&(k.forEach(d=>{d=d.trim(),d&&K(ee(e,d))}),B.value="")}l||(n.value=-1),m.value=!l}}),re=R(()=>typeof e.counterValue=="function"?e.counterValue(t.value):typeof e.counterValue=="number"?e.counterValue:e.multiple?t.value.length:c.value.length);G(B,l=>{b?xe(()=>b=!1):C.value&&!f.value&&(f.value=!0),s("update:search",l)}),G(t,l=>{var r;!e.multiple&&!T.value&&(B.value=((r=l[0])==null?void 0:r.title)??"")});const{filteredItems:le,getMatches:pe}=Ml(e,F,()=>m.value?"":c.value),W=R(()=>e.hideSelected?le.value.filter(l=>!t.value.some(r=>r.value===l.value)):le.value),Re=R(()=>t.value.map(l=>l.value)),ie=R(()=>{var r;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&c.value===((r=W.value[0])==null?void 0:r.title))&&W.value.length>0&&!m.value&&!x.value}),ce=R(()=>e.hideNoData&&!W.value.length||a.isReadonly.value||a.isDisabled.value),de=E(),Me=ml(de,h);function Ae(l){b=!0,e.openOnClear&&(f.value=!0)}function Pe(){ce.value||(f.value=!0)}function De(l){ce.value||(C.value&&(l.preventDefault(),l.stopPropagation()),f.value=!f.value)}function Ee(l){var r;l.key!==" "&&Ve(l)&&((r=h.value)==null||r.focus())}function Ne(l){var d;if(Je(l)||a.isReadonly.value)return;const r=h.value.selectionStart,k=t.value.length;if(["Enter","ArrowDown","ArrowUp"].includes(l.key)&&l.preventDefault(),["Enter","ArrowDown"].includes(l.key)&&(f.value=!0),["Escape"].includes(l.key)&&(f.value=!1),["Enter","Escape","Tab"].includes(l.key)&&(ie.value&&["Enter","Tab"].includes(l.key)&&!t.value.some(y=>{let{value:D}=y;return D===W.value[0].value})&&K(le.value[0]),m.value=!0),l.key==="ArrowDown"&&ie.value&&((d=de.value)==null||d.focus("next")),l.key==="Enter"&&c.value&&(K(ee(e,c.value)),T.value&&(B.value="")),["Backspace","Delete"].includes(l.key)){if(!e.multiple&&T.value&&t.value.length>0&&!c.value)return K(t.value[0],!1);if(~n.value){l.preventDefault();const y=n.value;K(t.value[n.value],!1),n.value=y>=k-1?k-2:y}else l.key==="Backspace"&&!c.value&&(n.value=k-1);return}if(e.multiple)if(l.key==="ArrowLeft"){if(n.value<0&&r>0)return;const y=n.value>-1?n.value-1:k-1;t.value[y]?n.value=y:(n.value=-1,h.value.setSelectionRange(c.value.length,c.value.length))}else if(l.key==="ArrowRight"){if(n.value<0)return;const y=n.value+1;t.value[y]?n.value=y:(n.value=-1,h.value.setSelectionRange(0,0))}else~n.value&&Ve(l)&&(n.value=-1)}function Te(){var l;e.eager&&((l=_.value)==null||l.calculateVisibleItems())}function Be(){var l;C.value&&(m.value=!0,(l=h.value)==null||l.focus())}function K(l){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(!l||l.props.disabled))if(e.multiple){const k=t.value.findIndex(y=>(e.valueComparator||ke)(y.value,l.value)),d=r??!~k;if(~k){const y=d?[...t.value,l]:[...t.value];y.splice(k,1),t.value=y}else d&&(t.value=[...t.value,l]);e.clearOnSelect&&(c.value="")}else{const k=r!==!1;t.value=k?[l]:[],B.value=k&&!T.value?l.title:"",xe(()=>{f.value=!1,m.value=!0})}}function Ke(l){C.value=!0,setTimeout(()=>{x.value=!0})}function Le(l){x.value=!1}function Oe(l){(l==null||l===""&&!e.multiple&&!T.value)&&(t.value=[])}return G(C,(l,r)=>{if(!(l||l===r)&&(n.value=-1,f.value=!1,c.value)){if(e.multiple){K(ee(e,c.value));return}if(!T.value)return;t.value.some(k=>{let{title:d}=k;return d===c.value})?B.value="":K(ee(e,c.value))}}),G(f,()=>{if(!e.hideSelected&&f.value&&t.value.length){const l=W.value.findIndex(r=>t.value.some(k=>(e.valueComparator||ke)(k.value,r.value)));He&&window.requestAnimationFrame(()=>{var r;l>=0&&((r=_.value)==null||r.scrollToIndex(l))})}}),G(()=>e.items,(l,r)=>{f.value||C.value&&!r.length&&l.length&&(f.value=!0)}),Qe(()=>{const l=!!(!e.hideNoData||W.value.length||i["prepend-item"]||i["append-item"]||i["no-data"]),r=t.value.length>0,k=ue.filterProps(e);return u(ue,X({ref:h},k,{modelValue:c.value,"onUpdate:modelValue":[d=>c.value=d,Oe],focused:C.value,"onUpdate:focused":d=>C.value=d,validationValue:t.externalValue,counterValue:re.value,dirty:r,class:["v-combobox",{"v-combobox--active-menu":f.value,"v-combobox--chips":!!e.chips,"v-combobox--selection-slot":!!T.value,"v-combobox--selecting-index":n.value>-1,[`v-combobox--${e.multiple?"multiple":"single"}`]:!0},e.class],style:e.style,readonly:a.isReadonly.value,placeholder:r?void 0:e.placeholder,"onClick:clear":Ae,"onMousedown:control":Pe,onKeydown:Ne}),{...i,default:()=>u(q,null,[u(hl,X({ref:V,modelValue:f.value,"onUpdate:modelValue":d=>f.value=d,activator:"parent",contentClass:"v-combobox__content",disabled:ce.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:Te,onAfterLeave:Be},e.menuProps),{default:()=>[l&&u(kl,X({ref:de,selected:Re.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:d=>d.preventDefault(),onKeydown:Ee,onFocusin:Ke,onFocusout:Le,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},Me,e.listProps),{default:()=>{var d,y,D;return[(d=i["prepend-item"])==null?void 0:d.call(i),!W.value.length&&!e.hideNoData&&(((y=i["no-data"])==null?void 0:y.call(i))??u(me,{key:"no-data",title:N(e.noDataText)},null)),u(xl,{ref:_,renderless:!0,items:W.value},{default:H=>{var be;let{item:S,index:J,itemRef:P}=H;const ge=X(S.props,{ref:P,key:S.value,active:ie.value&&J===0?!0:void 0,onClick:()=>K(S,null)});return((be=i.item)==null?void 0:be.call(i,{item:S,index:J,props:ge}))??u(me,X(ge,{role:"option"}),{prepend:te=>{let{isSelected:ae}=te;return u(q,null,[e.multiple&&!e.hideSelected?u(Vl,{key:S.value,modelValue:ae,ripple:!1,tabindex:"-1"},null):void 0,S.props.prependAvatar&&u(Il,{image:S.props.prependAvatar},null),S.props.prependIcon&&u(Z,{icon:S.props.prependIcon},null)])},title:()=>{var te,ae;return m.value?S.title:Al(S.title,(te=pe(S))==null?void 0:te.title,((ae=c.value)==null?void 0:ae.length)??0)}})}}),(D=i["append-item"])==null?void 0:D.call(i)]}})]}),t.value.map((d,y)=>{function D(P){P.stopPropagation(),P.preventDefault(),K(d,!1)}const H={"onClick:close":D,onKeydown(P){P.key!=="Enter"&&P.key!==" "||(P.preventDefault(),P.stopPropagation(),D(P))},onMousedown(P){P.preventDefault(),P.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},S=$.value?!!i.chip:!!i.selection,J=S?Ze($.value?i.chip({item:d,index:y,props:H}):i.selection({item:d,index:y})):void 0;if(!(S&&!J))return u("div",{key:d.value,class:["v-combobox__selection",y===n.value&&["v-combobox__selection--selected",oe.value]],style:y===n.value?se.value:{}},[$.value?i.chip?u(Fl,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:d.title}}},{default:()=>[J]}):u(_l,X({key:"chip",closable:e.closableChips,size:"small",text:d.title,disabled:d.props.disabled},H),null):J??u("span",{class:"v-combobox__selection-text"},[d.title,e.multiple&&y<t.value.length-1&&u("span",{class:"v-combobox__selection-comma"},[j(",")])])])})]),"append-inner":function(){var H;for(var d=arguments.length,y=new Array(d),D=0;D<d;D++)y[D]=arguments[D];return u(q,null,[(H=i["append-inner"])==null?void 0:H.call(i,...y),(!e.hideNoData||e.items.length)&&e.menuIcon?u(Z,{class:"v-combobox__menu-icon",icon:e.menuIcon,onMousedown:De,onClick:Xe,"aria-label":N(A.value),title:N(A.value),tabindex:"-1"},null):void 0])}})}),yl({isFocused:C,isPristine:m,menu:f,search:c,selectionIndex:n,filteredItems:le,select:K},h)}}),El={key:0,class:"text-red"},Nl={class:"d-flex align-center"},Tl={class:"text-caption"},Bl={class:"text-caption"},Kl={key:0,class:"d-flex align-center"},Ll={key:0,class:"ml-2"},Ol={key:1,class:"d-flex align-center"},$l={key:2,class:"d-flex align-center pl-5"},Ul={key:3,class:"d-flex align-center"},jl={key:4,class:"d-flex align-center"},Gl={key:5,class:"d-flex align-center"},zl={key:0},Wl={key:1},Hl={key:0},Ql={key:0},nt=qe({__name:"get-started",setup(e){const{connectNetwork:g,dltApi:s}=we(),{selectedChainId:i,currentWallet:N,selectedNetwork:h,selectedProvider:C}=el(we()),m=E(""),x=E([]),V=E(""),_=E(!1),M=E(""),f=E([]),n=E(h.value),b=E(null),O=R(()=>!!C.value),A=R(()=>{var t;return!!N.value&&n.value&&((t=n.value)==null?void 0:t.chainId)===i.value});let F=null;async function Y(){m.value&&(await Ce.setItem("globalRefAddress",m.value),_.value=!0)}ll(async()=>{F=s(),m.value=await Ce.getItem("globalRefAddress"),m.value&&(_.value=!0)}),G(M,async t=>{if(!t||t.length<2){f.value=[];return}f.value=await tl(t)});async function z(){if(F=s(),!m.value||!F){x.value=[];return}try{const t=await cl(F.currentProvider,m.value,"ISoCashGlobalReferentialFull.CountrySet");console.log("events",t),x.value=t.map(a=>({country:al.from(a.returnValues.country.slice(-4),"hex").toString(),address:a.returnValues.countryContract}))}catch{x.value=[]}}G(m,async t=>{await z()}),G(h,async t=>{console.log("selectedNetwork changed",t==null?void 0:t.chainId),n.value=t,await z()}),G(n,async t=>{console.log("network changed",t==null?void 0:t.chainId),h.value=t});async function oe(){if(!V.value||!F)return;const t=V.value;console.log("ibanToResolve",t);try{const a=await dl(F.currentProvider,m.value,"ISoCashGlobalReferentialFull.decodeIBANToContracts",t);console.log("resolved",a),b.value=a}catch(a){b.value={error:a.message}}}const se=R(()=>rl(n.value,m.value,"ISoCashGlobalReferentialFull.decodeIBANToContracts",V.value));return(t,a)=>{const $=nl("router-link"),T=Ue,B=$e;return I(),p(q,null,[a[20]||(a[20]=v("h2",{class:"mb-3"},"Get started with your configuration",-1)),o(O)?L("",!0):(I(),p("div",El," Install Metamask or a EIP-6936 compatible wallet ")),u(il,null,{default:w(()=>[u(Fe,{cols:"6"},{default:w(()=>[a[19]||(a[19]=v("div",{class:"d-flex align-center"}," Connect to an EVM network (ensure your wallet is unlocked) ",-1)),v("div",Nl,[u(Dl,{items:o(f),"item-title":"name","item-value":"chainId","return-object":"",modelValue:o(n),"onUpdate:modelValue":[a[0]||(a[0]=c=>ne(n)?n.value=c:null),a[2]||(a[2]=c=>h.value=o(n))],search:o(M),"onUpdate:search":a[1]||(a[1]=c=>ne(M)?M.value=c:null),label:"EVM network",messages:`${o(f).length} networks found`,outlined:"",dense:"",clearable:""},{item:w(({item:c,props:re})=>[u(me,ul(ol(re)),{default:w(()=>[v("div",Tl,U(c.raw.title),1),v("div",Bl,"chain id: "+U(c.raw.chainId),1)]),_:2},1040)]),_:1},8,["items","modelValue","search","messages"]),u(fe,{class:"ml-2 mb-4",color:"primary",disabled:!o(n)||o(A),onClick:a[3]||(a[3]=c=>o(g)(o(n)))},{default:w(()=>a[6]||(a[6]=[j("Connect")])),_:1},8,["disabled"])]),o(A)?(I(),p("div",Kl,[a[8]||(a[8]=j(" Initialize the referential address ")),o(m)?(I(),p("span",Ll,[u($,{to:`/interaction?contract=ISoCashGlobalReferentialFull&address=${o(m)}`},{default:w(()=>[u(Z,null,{default:w(()=>a[7]||(a[7]=[j("mdi-open-in-app")])),_:1})]),_:1},8,["to"])])):L("",!0)])):L("",!0),o(A)?(I(),p("div",Ol,[u(ue,{modelValue:o(m),"onUpdate:modelValue":a[4]||(a[4]=c=>ne(m)?m.value=c:null),label:"Global Referential Address (0x...)",outlined:"",dense:"","hide-details":""},null,8,["modelValue"]),u(fe,{class:"ml-2",color:"primary",onClick:Y},{default:w(()=>[j(U(o(_)?"Replace":"save"),1)]),_:1})])):L("",!0),o(A)?(I(),p("div",$l,[u(_e,null,{default:w(()=>[a[10]||(a[10]=v("thead",null,[v("tr",null,[v("th",null,"Country"),v("th",null,"Referential contract"),v("th",null,"Inspect")])],-1)),v("tbody",null,[(I(!0),p(q,null,sl(o(x),c=>(I(),p("tr",{key:c.address},[v("td",null,U(c.country),1),v("td",null,U(c.address),1),v("td",null,[u($,{to:`/interaction?contract=ISoCashCountryReferentialFull&address=${c.address}`},{default:w(()=>[u(Z,null,{default:w(()=>a[9]||(a[9]=[j("mdi-open-in-app")])),_:1})]),_:2},1032,["to"])])]))),128))])]),_:1})])):L("",!0),o(A)&&o(_)?(I(),p("div",Ul," Try to resolve an IBAN ")):L("",!0),o(A)&&o(_)?(I(),p("div",jl,[u(ue,{modelValue:o(V),"onUpdate:modelValue":a[5]||(a[5]=c=>ne(V)?V.value=c:null),label:"IBAN to resolve an account",outlined:"",dense:"","hide-details":""},null,8,["modelValue"]),u(fe,{class:"ml-2",color:"primary",onClick:oe},{default:w(()=>a[11]||(a[11]=[j("Find account")])),_:1})])):L("",!0),o(A)&&o(_)&&o(b)?(I(),p("div",Gl,[o(b).error?(I(),p("span",zl,"Fail : "+U(o(b).error),1)):(I(),p("div",Wl,[u(_e,null,{default:w(()=>[a[18]||(a[18]=v("thead",null,[v("tr",null,[v("th",null,"Result"),v("th",null,"Value"),v("th",null,"Inspect")])],-1)),v("tbody",null,[v("tr",null,[a[12]||(a[12]=v("td",null,"Valid?",-1)),v("td",null,U(o(b).valid?"Yes":"No"),1),a[13]||(a[13]=v("td",null,null,-1))]),v("tr",null,[a[15]||(a[15]=v("td",null,"Bank",-1)),v("td",null,U(o(b).bank),1),o(b).valid?(I(),p("td",Hl,[u($,{to:`/interaction?contract=ISoCashBankExternal&address=${o(b).bank}`},{default:w(()=>[u(Z,null,{default:w(()=>a[14]||(a[14]=[j("mdi-open-in-app")])),_:1})]),_:1},8,["to"])])):L("",!0)]),v("tr",null,[a[17]||(a[17]=v("td",null,"Account",-1)),v("td",null,U(o(b).account),1),o(b).valid?(I(),p("td",Ql,[u($,{to:`/interaction?contract=ISoCashAccountFull&address=${o(b).account}`},{default:w(()=>[u(Z,null,{default:w(()=>a[16]||(a[16]=[j("mdi-open-in-app")])),_:1})]),_:1},8,["to"])])):L("",!0)])])]),_:1})]))])):L("",!0)]),_:1}),u(Fe,null,{default:w(()=>[o(V)?(I(),Ie(B,{key:1,text:o(se)},null,8,["text"])):(I(),Ie(T,{key:0,source:"initiate-referential"}))]),_:1})]),_:1})],64)}}});export{nt as default};
