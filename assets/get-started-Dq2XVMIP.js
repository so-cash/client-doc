import{_ as Ue}from"./MarkdownDynamic.vue_vue_type_script_setup_true_lang-CAG1-N1D.js";import{_ as je}from"./MarkdownDoc.vue_vue_type_script_setup_true_lang-ClNrtISv.js";import{p as Me,s as H,i as p,T as u,y as Ge,X as ye,Y as ze,g as We,Z as He,r as N,v as we,w as z,_ as xe,$ as Ve,a0 as Qe,u as Ye,e as n,B as q,a1 as Je,a2 as Xe,a3 as Ce,Q as le,a4 as Ze,a5 as qe,J as G,d as el,F as Ie,a6 as ll,o as tl,a7 as Fe,a8 as al,P,L as f,W as $,H as I,a9 as nl,M as ul,a as _,aa as oe,ab as ol,ac as sl,K as j,S as rl,c as _e}from"./index-5x-XK_FY.js";import{m as il,g as fe,b as cl,c as dl,V as pe,a as Se,d as vl}from"./VTable-Cf6aVXnh.js";import{u as fl,a as ml,t as ae,b as yl,V as se,f as gl,m as bl,c as hl,d as kl,e as wl,g as ge,h as xl,i as Vl}from"./VSelect-DBhmHhMR.js";import{h as Cl,n as Il,l as ee,o as Fl,f as _l}from"./VGrid-DBzZwXdF.js";import{a as pl}from"./VChip-B7mbFM1v.js";import{a as me}from"./VBtn-CSh5ZiDW.js";import"./VOverlay-CVTb2ZPO.js";const Sl=(e,b,o)=>e==null||b==null?-1:e.toString().toLocaleLowerCase().indexOf(b.toString().toLocaleLowerCase()),Ml=Me({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function Rl(e,b,o){var m;const i=[],K=(o==null?void 0:o.default)??Sl,k=o!=null&&o.filterKeys?ye(o.filterKeys):!1,F=Object.keys((o==null?void 0:o.customKeyFilter)??{}).length;if(!(e!=null&&e.length))return i;e:for(let x=0;x<e.length;x++){const[V,S=V]=ye(e[x]),E={},d={};let a=-1;if((b||F>0)&&!(o!=null&&o.noFilter)){if(typeof V=="object"){const M=k||Object.keys(S);for(const R of M){const Q=ze(S,R),T=(m=o==null?void 0:o.customKeyFilter)==null?void 0:m[R];if(a=T?T(Q,b,V):K(Q,b,V),a!==-1&&a!==!1)T?E[R]=a:d[R]=a;else if((o==null?void 0:o.filterMode)==="every")continue e}}else a=K(V,b,V),a!==-1&&a!==!1&&(d.title=a);const h=Object.keys(d).length,U=Object.keys(E).length;if(!h&&!U||(o==null?void 0:o.filterMode)==="union"&&U!==F&&!h||(o==null?void 0:o.filterMode)==="intersection"&&(U!==F||!h))continue}i.push({index:x,matches:{...d,...E}})}return i}function Al(e,b,o,i){const K=H([]),k=H(new Map),F=p(()=>u(b));Ge(()=>{const x=typeof o=="function"?o():u(o),V=typeof x!="string"&&typeof x!="number"?"":String(x),S=Rl(F.value,V,{customKeyFilter:{...e.customKeyFilter,...u(i==null?void 0:i.customKeyFilter)},default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),E=u(b),d=[],a=new Map;S.forEach(h=>{let{index:U,matches:M}=h;const R=E[U];d.push(R),a.set(R.value,M)}),K.value=d,k.value=a});function m(x){return k.value.get(x.value)}return{filteredItems:K,filteredMatches:k,getMatches:m}}function Pl(e,b,o){if(b==null)return e;if(Array.isArray(b))throw new Error("Multiple matches is not implemented");return typeof b=="number"&&~b?n(le,null,[n("span",{class:"v-combobox__unmask"},[e.substr(0,b)]),n("span",{class:"v-combobox__mask"},[e.substr(b,o)]),n("span",{class:"v-combobox__unmask"},[e.substr(b+o)])]):e}const El=Me({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:{type:Boolean,default:!0},delimiters:Array,...Ml({filterKeys:["title"]}),...bl({hideNoData:!0,returnObject:!0}),...Je(hl({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...Il({transition:!1})},"VCombobox"),Dl=We()({name:"VCombobox",props:El(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:search":e=>!0,"update:menu":e=>!0},setup(e,b){var be;let{emit:o,slots:i}=b;const{t:K}=He(),k=N(),F=H(!1),m=H(!0),x=H(!1),V=N(),S=N(),E=we(e,"menu"),d=p({get:()=>E.value,set:l=>{var r;E.value&&!l&&((r=V.value)!=null&&r.Î¨openChildren.size)||(E.value=l)}}),a=H(-1);let h=!1;const U=p(()=>{var l;return(l=k.value)==null?void 0:l.color}),M=p(()=>d.value?e.closeText:e.openText),{items:R,transformIn:Q,transformOut:T}=fl(e),{textColorClasses:re,textColorStyles:ie}=Cl(U),v=we(e,"modelValue",[],l=>Q(ye(l)),l=>{const r=T(l);return e.multiple?r:r[0]??null}),Y=ml(e),J=p(()=>!!(e.chips||i.chip)),s=p(()=>J.value||!!i.selection),t=H(!e.multiple&&!s.value?((be=v.value[0])==null?void 0:be.title)??"":""),g=p({get:()=>t.value,set:l=>{var r;if(t.value=l??"",!e.multiple&&!s.value&&(v.value=[ae(e,l)]),l&&e.multiple&&((r=e.delimiters)!=null&&r.length)){const w=l.split(new RegExp(`(?:${e.delimiters.join("|")})+`));w.length>1&&(w.forEach(c=>{c=c.trim(),c&&O(ae(e,c))}),t.value="")}l||(a.value=-1),m.value=!l}}),te=p(()=>typeof e.counterValue=="function"?e.counterValue(v.value):typeof e.counterValue=="number"?e.counterValue:e.multiple?v.value.length:g.value.length);z(t,l=>{h?Ve(()=>h=!1):F.value&&!d.value&&(d.value=!0),o("update:search",l)}),z(v,l=>{var r;!e.multiple&&!s.value&&(t.value=((r=l[0])==null?void 0:r.title)??"")});const{filteredItems:X,getMatches:C}=Al(e,R,()=>m.value?"":g.value),L=p(()=>e.hideSelected?X.value.filter(l=>!v.value.some(r=>r.value===l.value)):X.value),Re=p(()=>v.value.map(l=>l.value)),ce=p(()=>{var r;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&g.value===((r=L.value[0])==null?void 0:r.title))&&L.value.length>0&&!m.value&&!x.value}),de=p(()=>e.hideNoData&&!L.value.length||Y.isReadonly.value||Y.isDisabled.value),ve=N(),Ae=yl(ve,k);function Pe(l){h=!0,e.openOnClear&&(d.value=!0)}function Ee(){de.value||(d.value=!0)}function De(l){de.value||(F.value&&(l.preventDefault(),l.stopPropagation()),d.value=!d.value)}function Ne(l){var r;l.key!==" "&&Ce(l)&&((r=k.value)==null||r.focus())}function Te(l){var c;if(Xe(l)||Y.isReadonly.value)return;const r=k.value.selectionStart,w=v.value.length;if(["Enter","ArrowDown","ArrowUp"].includes(l.key)&&l.preventDefault(),["Enter","ArrowDown"].includes(l.key)&&(d.value=!0),["Escape"].includes(l.key)&&(d.value=!1),["Enter","Escape","Tab"].includes(l.key)&&(ce.value&&["Enter","Tab"].includes(l.key)&&!v.value.some(y=>{let{value:B}=y;return B===L.value[0].value})&&O(X.value[0]),m.value=!0),l.key==="ArrowDown"&&ce.value&&((c=ve.value)==null||c.focus("next")),l.key==="Enter"&&g.value&&(O(ae(e,g.value)),s.value&&(t.value="")),["Backspace","Delete"].includes(l.key)){if(!e.multiple&&s.value&&v.value.length>0&&!g.value)return O(v.value[0],!1);if(~a.value){l.preventDefault();const y=a.value;O(v.value[a.value],!1),a.value=y>=w-1?w-2:y}else l.key==="Backspace"&&!g.value&&(a.value=w-1);return}if(e.multiple)if(l.key==="ArrowLeft"){if(a.value<0&&r>0)return;const y=a.value>-1?a.value-1:w-1;v.value[y]?a.value=y:(a.value=-1,k.value.setSelectionRange(g.value.length,g.value.length))}else if(l.key==="ArrowRight"){if(a.value<0)return;const y=a.value+1;v.value[y]?a.value=y:(a.value=-1,k.value.setSelectionRange(0,0))}else~a.value&&Ce(l)&&(a.value=-1)}function Be(){var l;e.eager&&((l=S.value)==null||l.calculateVisibleItems())}function Ke(){var l;F.value&&(m.value=!0,(l=k.value)==null||l.focus())}function O(l){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(!l||l.props.disabled))if(e.multiple){const w=v.value.findIndex(y=>(e.valueComparator||xe)(y.value,l.value)),c=r??!~w;if(~w){const y=c?[...v.value,l]:[...v.value];y.splice(w,1),v.value=y}else c&&(v.value=[...v.value,l]);e.clearOnSelect&&(g.value="")}else{const w=r!==!1;v.value=w?[l]:[],t.value=w&&!s.value?l.title:"",Ve(()=>{d.value=!1,m.value=!0})}}function Le(l){F.value=!0,setTimeout(()=>{x.value=!0})}function Oe(l){x.value=!1}function $e(l){(l==null||l===""&&!e.multiple&&!s.value)&&(v.value=[])}return z(F,(l,r)=>{if(!(l||l===r)&&(a.value=-1,d.value=!1,g.value)){if(e.multiple){O(ae(e,g.value));return}if(!s.value)return;v.value.some(w=>{let{title:c}=w;return c===g.value})?t.value="":O(ae(e,g.value))}}),z(d,()=>{if(!e.hideSelected&&d.value&&v.value.length){const l=L.value.findIndex(r=>v.value.some(w=>(e.valueComparator||xe)(w.value,r.value)));Qe&&window.requestAnimationFrame(()=>{var r;l>=0&&((r=S.value)==null||r.scrollToIndex(l))})}}),z(()=>e.items,(l,r)=>{d.value||F.value&&!r.length&&l.length&&(d.value=!0)}),Ye(()=>{const l=!!(!e.hideNoData||L.value.length||i["prepend-item"]||i["append-item"]||i["no-data"]),r=v.value.length>0,w=se.filterProps(e);return n(se,q({ref:k},w,{modelValue:g.value,"onUpdate:modelValue":[c=>g.value=c,$e],focused:F.value,"onUpdate:focused":c=>F.value=c,validationValue:v.externalValue,counterValue:te.value,dirty:r,class:["v-combobox",{"v-combobox--active-menu":d.value,"v-combobox--chips":!!e.chips,"v-combobox--selection-slot":!!s.value,"v-combobox--selecting-index":a.value>-1,[`v-combobox--${e.multiple?"multiple":"single"}`]:!0},e.class],style:e.style,readonly:Y.isReadonly.value,placeholder:r?void 0:e.placeholder,"onClick:clear":Pe,"onMousedown:control":Ee,onKeydown:Te}),{...i,default:()=>n(le,null,[n(kl,q({ref:V,modelValue:d.value,"onUpdate:modelValue":c=>d.value=c,activator:"parent",contentClass:"v-combobox__content",disabled:de.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:Be,onAfterLeave:Ke},e.menuProps),{default:()=>[l&&n(wl,q({ref:ve,selected:Re.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:c=>c.preventDefault(),onKeydown:Ne,onFocusin:Le,onFocusout:Oe,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},Ae,e.listProps),{default:()=>{var c,y,B;return[(c=i["prepend-item"])==null?void 0:c.call(i),!L.value.length&&!e.hideNoData&&(((y=i["no-data"])==null?void 0:y.call(i))??n(ge,{key:"no-data",title:K(e.noDataText)},null)),n(xl,{ref:S,renderless:!0,items:L.value},{default:W=>{var ke;let{item:A,index:Z,itemRef:D}=W;const he=q(A.props,{ref:D,key:A.value,active:ce.value&&Z===0?!0:void 0,onClick:()=>O(A,null)});return((ke=i.item)==null?void 0:ke.call(i,{item:A,index:Z,props:he}))??n(ge,q(he,{role:"option"}),{prepend:ne=>{let{isSelected:ue}=ne;return n(le,null,[e.multiple&&!e.hideSelected?n(Vl,{key:A.value,modelValue:ue,ripple:!1,tabindex:"-1"},null):void 0,A.props.prependAvatar&&n(Fl,{image:A.props.prependAvatar},null),A.props.prependIcon&&n(ee,{icon:A.props.prependIcon},null)])},title:()=>{var ne,ue;return m.value?A.title:Pl(A.title,(ne=C(A))==null?void 0:ne.title,((ue=g.value)==null?void 0:ue.length)??0)}})}}),(B=i["append-item"])==null?void 0:B.call(i)]}})]}),v.value.map((c,y)=>{function B(D){D.stopPropagation(),D.preventDefault(),O(c,!1)}const W={"onClick:close":B,onKeydown(D){D.key!=="Enter"&&D.key!==" "||(D.preventDefault(),D.stopPropagation(),B(D))},onMousedown(D){D.preventDefault(),D.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},A=J.value?!!i.chip:!!i.selection,Z=A?qe(J.value?i.chip({item:c,index:y,props:W}):i.selection({item:c,index:y})):void 0;if(!(A&&!Z))return n("div",{key:c.value,class:["v-combobox__selection",y===a.value&&["v-combobox__selection--selected",re.value]],style:y===a.value?ie.value:{}},[J.value?i.chip?n(_l,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:c.title}}},{default:()=>[Z]}):n(pl,q({key:"chip",closable:e.closableChips,size:"small",text:c.title,disabled:c.props.disabled},W),null):Z??n("span",{class:"v-combobox__selection-text"},[c.title,e.multiple&&y<v.value.length-1&&n("span",{class:"v-combobox__selection-comma"},[G(",")])])])})]),"append-inner":function(){var W;for(var c=arguments.length,y=new Array(c),B=0;B<c;B++)y[B]=arguments[B];return n(le,null,[(W=i["append-inner"])==null?void 0:W.call(i,...y),(!e.hideNoData||e.items.length)&&e.menuIcon?n(ee,{class:"v-combobox__menu-icon",icon:e.menuIcon,onMousedown:De,onClick:Ze,"aria-label":K(M.value),title:K(M.value),tabindex:"-1"},null):void 0])}})}),gl({isFocused:F,isPristine:m,menu:d,search:g,selectionIndex:a,filteredItems:X,select:O},k)}}),Nl={key:0,class:"text-red"},Tl={class:"d-flex align-center"},Bl={class:"text-caption"},Kl={class:"text-caption"},Ll={key:0,class:"d-flex align-center"},Ol={key:0,class:"ml-2"},$l={key:1,class:"d-flex align-center"},Ul={key:2,class:"d-flex align-center pl-5"},jl={key:3,class:"d-flex align-center"},Gl={key:4,class:"d-flex align-center"},zl={key:5,class:"d-flex align-center"},Wl={key:0},Hl={key:1},Ql={key:0},Yl={key:0},ut=el({__name:"get-started",setup(e){const{connectNetwork:b,dltApi:o}=Ie(),{selectedChainId:i,currentWallet:K,selectedNetwork:k,selectedProvider:F}=ll(Ie()),m=N(""),x=N([]),V=N(""),S=N(!1),E=N(""),d=N([]),a=N(k.value),h=N(null),U=p(()=>!!F.value),M=p(()=>{var s;return!!K.value&&a.value&&((s=a.value)==null?void 0:s.chainId)===i.value}),R=N(null),Q=p(()=>R.value?R.value:a.value?M.value?`Connected to ${a.value.name} (${a.value.chainId})`:`${d.value.length} networks found`:"No network selected");let T=null;async function re(){m.value&&(await Fe.setItem("globalRefAddress",m.value),S.value=!0)}tl(async()=>{T=o(),m.value=await Fe.getItem("globalRefAddress"),m.value&&(S.value=!0)}),z(E,async s=>{if(!s||s.length<2){d.value=[];return}d.value=await al(s)});async function ie(s){try{R.value=null,await b(s)}catch(t){R.value="Lock/Unlock your wallet manually and try again; "+t.message}}async function v(){if(T=o(),!m.value||!T){x.value=[];return}try{const s=await dl(T.currentProvider,m.value,fe("ISoCashGlobalReferentialFull","CountrySet"));console.log("events",s),x.value=s.map(t=>({country:nl.from(t.returnValues[0].v.slice(-4),"hex").toString(),address:t.returnValues[1].v}))}catch{x.value=[]}}z(m,async s=>{await v()}),z(k,async s=>{console.log("selectedNetwork changed",s==null?void 0:s.chainId),a.value=s,await v()}),z(a,async s=>{console.log("network changed",s==null?void 0:s.chainId),R.value=null,k.value=s});async function Y(){if(!V.value||!T)return;const s=V.value;console.log("ibanToResolve",s);try{const t=await vl(T.currentProvider,m.value,fe("ISoCashGlobalReferentialFull","decodeIBANToContracts"),s);console.log("resolved",t),h.value=Object.fromEntries(t.map(({name:g,v:te})=>[g,te]))}catch(t){h.value={error:t.message}}}const J=p(()=>il(a.value,m.value,fe("ISoCashGlobalReferentialFull","decodeIBANToContracts"),V.value));return(s,t)=>{const g=ul("router-link"),te=je,X=Ue;return _(),P(le,null,[t[20]||(t[20]=f("h2",{class:"mb-3"},"Get started with your configuration",-1)),u(U)?$("",!0):(_(),P("div",Nl," Install Metamask or a EIP-6936 compatible wallet ")),n(cl,null,{default:I(()=>[n(pe,{cols:"6"},{default:I(()=>[t[19]||(t[19]=f("div",{class:"d-flex align-center"}," Connect to an EVM network (ensure your wallet is unlocked) ",-1)),f("div",Tl,[n(Dl,{items:u(d),"item-title":"name","item-value":"chainId","return-object":"",modelValue:u(a),"onUpdate:modelValue":[t[0]||(t[0]=C=>oe(a)?a.value=C:null),t[2]||(t[2]=C=>k.value=u(a))],search:u(E),"onUpdate:search":t[1]||(t[1]=C=>oe(E)?E.value=C:null),label:"EVM network",messages:u(Q),outlined:"",dense:"",clearable:""},{item:I(({item:C,props:L})=>[n(ge,ol(sl(L)),{default:I(()=>[f("div",Bl,j(C.raw.title),1),f("div",Kl,"chain id: "+j(C.raw.chainId),1)]),_:2},1040)]),_:1},8,["items","modelValue","search","messages"]),n(me,{class:"ml-2 mb-4",color:"primary",disabled:!u(a)||u(M),onClick:t[3]||(t[3]=C=>ie(u(a)))},{default:I(()=>t[6]||(t[6]=[G("Connect")])),_:1},8,["disabled"])]),u(M)?(_(),P("div",Ll,[t[8]||(t[8]=G(" Initialize the referential address ")),u(m)?(_(),P("span",Ol,[n(g,{to:`/interaction?contract=ISoCashGlobalReferentialFull&address=${u(m)}`},{default:I(()=>[n(ee,null,{default:I(()=>t[7]||(t[7]=[G("mdi-open-in-app")])),_:1})]),_:1},8,["to"])])):$("",!0)])):$("",!0),u(M)?(_(),P("div",$l,[n(se,{modelValue:u(m),"onUpdate:modelValue":t[4]||(t[4]=C=>oe(m)?m.value=C:null),label:"Global Referential Address (0x...)",outlined:"",dense:"","hide-details":""},null,8,["modelValue"]),n(me,{class:"ml-2",color:"primary",onClick:re},{default:I(()=>[G(j(u(S)?"Replace":"save"),1)]),_:1})])):$("",!0),u(M)?(_(),P("div",Ul,[n(Se,null,{default:I(()=>[t[10]||(t[10]=f("thead",null,[f("tr",null,[f("th",null,"Country"),f("th",null,"Referential contract"),f("th",null,"Inspect")])],-1)),f("tbody",null,[(_(!0),P(le,null,rl(u(x),C=>(_(),P("tr",{key:C.address},[f("td",null,j(C.country),1),f("td",null,j(C.address),1),f("td",null,[n(g,{to:`/interaction?contract=ISoCashCountryReferentialFull&address=${C.address}`},{default:I(()=>[n(ee,null,{default:I(()=>t[9]||(t[9]=[G("mdi-open-in-app")])),_:1})]),_:2},1032,["to"])])]))),128))])]),_:1})])):$("",!0),u(M)&&u(S)?(_(),P("div",jl," Try to resolve an IBAN ")):$("",!0),u(M)&&u(S)?(_(),P("div",Gl,[n(se,{modelValue:u(V),"onUpdate:modelValue":t[5]||(t[5]=C=>oe(V)?V.value=C:null),label:"IBAN to resolve an account",outlined:"",dense:"","hide-details":""},null,8,["modelValue"]),n(me,{class:"ml-2",color:"primary",onClick:Y},{default:I(()=>t[11]||(t[11]=[G("Find account")])),_:1})])):$("",!0),u(M)&&u(S)&&u(h)?(_(),P("div",zl,[u(h).error?(_(),P("span",Wl,"Fail : "+j(u(h).error),1)):(_(),P("div",Hl,[n(Se,null,{default:I(()=>[t[18]||(t[18]=f("thead",null,[f("tr",null,[f("th",null,"Result"),f("th",null,"Value"),f("th",null,"Inspect")])],-1)),f("tbody",null,[f("tr",null,[t[12]||(t[12]=f("td",null,"Valid?",-1)),f("td",null,j(u(h).valid?"Yes":"No"),1),t[13]||(t[13]=f("td",null,null,-1))]),f("tr",null,[t[15]||(t[15]=f("td",null,"Bank",-1)),f("td",null,j(u(h).bank),1),u(h).valid?(_(),P("td",Ql,[n(g,{to:`/interaction?contract=ISoCashBankExternal&address=${u(h).bank}`},{default:I(()=>[n(ee,null,{default:I(()=>t[14]||(t[14]=[G("mdi-open-in-app")])),_:1})]),_:1},8,["to"])])):$("",!0)]),f("tr",null,[t[17]||(t[17]=f("td",null,"Account",-1)),f("td",null,j(u(h).account),1),u(h).valid?(_(),P("td",Yl,[n(g,{to:`/interaction?contract=ISoCashAccountFull&address=${u(h).account}`},{default:I(()=>[n(ee,null,{default:I(()=>t[16]||(t[16]=[G("mdi-open-in-app")])),_:1})]),_:1},8,["to"])])):$("",!0)])])]),_:1})]))])):$("",!0)]),_:1}),n(pe,null,{default:I(()=>[u(V)?(_(),_e(X,{key:1,text:u(J)},null,8,["text"])):(_(),_e(te,{key:0,source:"initiate-referential"}))]),_:1})]),_:1})],64)}}});export{ut as default};
