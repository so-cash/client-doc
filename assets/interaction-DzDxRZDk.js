import{d as U,c as V,a as i,H as m,P as _,W as I,L as $,S as D,K as x,Q as N,r as P,i as h,y as te,w as Q,M as ne,e as c,J as T,T as p,aa as H,ah as K,a9 as J,g as re,p as se,v as oe,f as ue,D as ie,t as ce,Z as de,k as me,m as fe,E as pe,b as ve,R as ye,B as ge,F as X,a6 as be,o as Ve,ai as ke,I as Z}from"./index-BGQUgNia.js";import{a as ae,V as le,b as z,P as _e,g as $e,m as Ce,d as xe,e as he,f as Ae,h as Te,c as Pe,l as Se}from"./VTable-DsJfHMWB.js";import{_ as Ie}from"./MarkdownDynamic.vue_vue_type_script_setup_true_lang-CEwJHLgi.js";import{l as q,p as Be,q as Ee,j as we,b as je,c as Oe,h as Me,r as Re,m as Fe,d as Le,k as Ne,s as De,f as Y}from"./VGrid-B2grHoh8.js";import{a as L,u as Ue,b as ze,m as qe,c as We}from"./VBtn-DterfAy2.js";import{a as G,b as W,c as Je,d as Ze,V as He}from"./VCard-D4ZJPDcA.js";import{V as ee,j as Ke,k as Qe}from"./VSelect-DROoK-g-.js";import{V as Ge}from"./VSpacer-DI9zLQF-.js";import"./VChip-Q6C6vPyj.js";import"./VOverlay-C5TLLCwX.js";const Xe={key:0},Ye={key:0},et={key:0},tt={class:"text-left"},at=U({__name:"EventsResult",props:{items:{},headers:{type:Boolean},signature:{type:Boolean}},setup(l){const b=l;return(n,e)=>(i(),V(ae,null,{default:m(()=>[b.headers?(i(),_("thead",Xe,[$("tr",null,[e[0]||(e[0]=$("th",null,"Id",-1)),b.signature?(i(),_("th",Ye,"Signature")):I("",!0),e[1]||(e[1]=$("th",{class:"text-center"},"Args",-1))])])):I("",!0),$("tbody",null,[(i(!0),_(N,null,D(b.items,(d,t)=>(i(),_("tr",{key:t},[$("td",null,x(d.id),1),b.signature?(i(),_("td",et,x(d.eventSignature),1)):I("",!0),$("td",tt,[$("pre",null,x(JSON.stringify(d.returnValues,null,2).slice(1).slice(0,-1)),1)])]))),128))])]),_:1}))}}),lt={class:"d-flex align-center mb-2"},nt={class:"text-subtitle-1"},rt=U({__name:"ABICaptureType",props:{parent:{},param:{},modelValue:{},depth:{}},emits:["update:modelValue"],setup(l,{emit:b}){const n=l,e=P(""),d=P(!1),t=P({}),B=b,C=h(()=>(n.depth||0)>0),O=o=>o.endsWith("[]"),M=o=>o==="tuple",w=o=>o.type==="address",E=o=>o.replace("[]",""),u=o=>({uint256:"number",string:"text",address:"text",bool:"checkbox",bytes32:"text"})[o]||"text";function f(o){let a="";if(M(o.type)){a={};for(const v of o.components)a[v.name]=f(v);return a}else return O(o.type)?[]:w(o)?K:""}const g=()=>t.value||[],A=()=>{t.value=[...g(),""],S()},R=o=>{t.value=g().filter((a,v)=>v!==o),S()};function r(o){return o.startsWith("0x")?Number(o):parseInt(o)}function s(o,a){const v=parseInt(o.replace("bytes","")||"0");let y=a.startsWith("0x")?J.from(a.substring(2),"hex"):J.from(a);if(v>0){const k=J.alloc(v,0);y.copy(k,0,0,v),y=k}return"0x"+y.toString("hex")}function F(o,a){if(Array.isArray(a)){const v=_e.from(E(o.type));return a.map(y=>F(v,y))}else if(typeof a=="object"){const v={...a};return Object.keys(a).forEach((y,k)=>{v[y]=F(o.components[k],a[y])}),v}else switch(o.type){case"address":return a||K;case"bool":return a?"true":"false";default:return/uint[0-9]*/.test(o.type)?r(`${a}`):/int[0-9]*/.test(o.type)?r(`${a}`):/bytes[0-9]*/.test(o.type)?s(o.type,`${a}`):a}}const S=(o,a)=>{const v=Array.isArray(t.value)?[...t.value]:typeof t.value=="object"?{...t.value}:t.value;B("update:modelValue",F(n.param,v))};return h(()=>!n.param),te(()=>{var o;if(console.log("watchEffect param called",(o=n.param)==null?void 0:o.name,e.value,d.value,JSON.stringify(n.modelValue,null,2)),n.param){const a=n.parent+"."+n.param.format("full");if(a!=e.value&&(e.value=a,d.value=!1),!d.value){d.value=!0;const v=n.modelValue||f(n.param);t.value=v,S()}}}),Q(t,o=>{S()}),(o,a)=>{const v=ne("ABICaptureType",!0);return i(),V(le,{cols:"12",md:C.value?12:6},{default:m(()=>[O(n.param.type)?(i(),_(N,{key:0},[$("div",lt,[$("span",nt,x(n.param.name)+" ("+x(n.param.type)+")",1),c(L,{icon:"",size:"x-small",class:"ml-2",onClick:a[0]||(a[0]=y=>A())},{default:m(()=>[c(q,null,{default:m(()=>a[5]||(a[5]=[T("mdi-plus")])),_:1})]),_:1})]),(i(!0),_(N,null,D(g(),(y,k)=>(i(),_("div",{key:k,class:"d-flex align-center mb-2"},[c(ee,{modelValue:p(t)[k],"onUpdate:modelValue":[j=>p(t)[k]=j,a[1]||(a[1]=j=>S())],label:`Element ${k+1}`,density:"compact","hide-details":"",variant:"outlined",type:u(E(n.param.type))},null,8,["modelValue","onUpdate:modelValue","label","type"]),c(L,{icon:"",size:"x-small",class:"ml-2",onClick:j=>R(k)},{default:m(()=>[c(q,null,{default:m(()=>a[6]||(a[6]=[T("mdi-close")])),_:1})]),_:2},1032,["onClick"])]))),128))],64)):M(n.param.type)?(i(),V(G,{key:1,class:"ma-0 pa-1",variant:"outlined"},{default:m(()=>[c(W,null,{default:m(()=>[c(z,null,{default:m(()=>[T(x(n.param.name)+":",1)]),_:1}),c(z,null,{default:m(()=>[(i(!0),_(N,null,D(n.param.components,y=>(i(),V(v,{key:y.name,parent:n.param.name,param:y,modelValue:p(t)[y.name],"onUpdate:modelValue":[k=>p(t)[y.name]=k,a[2]||(a[2]=k=>S())],depth:(n.depth||0)+1},null,8,["parent","param","modelValue","onUpdate:modelValue","depth"]))),128))]),_:1})]),_:1})]),_:1})):(i(),V(ee,{key:2,modelValue:p(t),"onUpdate:modelValue":a[3]||(a[3]=y=>H(t)?t.value=y:null),label:`${n.param.name} (${n.param.type})`,density:"compact",variant:"outlined",type:u(n.param.type),clearable:"","onClick:clear":a[4]||(a[4]=y=>t.value=f(n.param))},null,8,["modelValue","label","type"]))]),_:1},8,["md"])}}}),st=U({__name:"ABICaptureFunction",props:{fragment:{},modelValue:{}},emits:["update:modelValue"],setup(l,{emit:b}){const n=l,e=P({}),d=P(""),t=P(!1),B=b,C=u=>u.endsWith("[]"),O=u=>u==="tuple",M=u=>u.type==="address";function w(u){let f="";if(O(u.type)){f={};for(const g of u.components)f[g.name]=w(g);return f}else return C(u.type)?[]:M(u)?K:""}h(()=>{var u,f;return((f=(u=n.fragment)==null?void 0:u.inputs)==null?void 0:f.filter(g=>g.type!=="tuple"||g.components))||[]});const E=(u,f)=>{const g={...e.value};B("update:modelValue",{...g})};return h(()=>!n.fragment||n.fragment.inputs.length==0),te(()=>{var u;if(n.fragment){const f=n.fragment.format("full");if(f!=d.value&&(t.value=!1,d.value=f),console.log("watchEffect function called",(u=n.fragment)==null?void 0:u.name,d.value,t.value,JSON.stringify(n.modelValue,null,2)),!t.value){t.value=!0;const g=n.modelValue||{};n.fragment.inputs.forEach(A=>{g[A.name]=w(A)}),e.value=g,E()}}}),Q(e,u=>{E()}),(u,f)=>{const g=rt;return u.fragment?(i(),V(G,{key:0,class:"ma-0 pa-2",variant:"outlined"},{default:m(()=>[u.fragment.inputs.length>0?(i(),V(W,{key:0},{default:m(()=>[c(z,null,{default:m(()=>[(i(!0),_(N,null,D(u.fragment.inputs,A=>(i(),V(g,{parent:u.fragment.name,param:A,modelValue:p(e)[A.name],"onUpdate:modelValue":[R=>p(e)[A.name]=R,f[0]||(f[0]=R=>E())]},null,8,["parent","param","modelValue","onUpdate:modelValue"]))),256))]),_:1})]),_:1})):(i(),V(W,{key:1},{default:m(()=>f[1]||(f[1]=[T(" No parameters needed ")])),_:1}))]),_:1})):I("",!0)}}}),ot=Be("v-alert-title"),ut=["success","info","warning","error"],it=se({border:{type:[Boolean,String],validator:l=>typeof l=="boolean"||["top","end","bottom","start"].includes(l)},borderColor:String,closable:Boolean,closeIcon:{type:ye,default:"$close"},closeLabel:{type:String,default:"$vuetify.close"},icon:{type:[Boolean,String,Function,Object],default:null},modelValue:{type:Boolean,default:!0},prominent:Boolean,title:String,text:String,type:{type:String,validator:l=>ut.includes(l)},...ve(),...Ne(),...pe(),...Le(),...We(),...qe(),...Fe(),...fe(),...me(),...Re({variant:"flat"})},"VAlert"),ct=re()({name:"VAlert",props:it(),emits:{"click:close":l=>!0,"update:modelValue":l=>!0},setup(l,b){let{emit:n,slots:e}=b;const d=oe(l,"modelValue"),t=h(()=>{if(l.icon!==!1)return l.type?l.icon??`$${l.type}`:l.icon}),B=h(()=>({color:l.color??l.type,variant:l.variant})),{themeClasses:C}=ue(l),{colorClasses:O,colorStyles:M,variantClasses:w}=Ee(B),{densityClasses:E}=we(l),{dimensionStyles:u}=ie(l),{elevationClasses:f}=je(l),{locationStyles:g}=Ue(l),{positionClasses:A}=ze(l),{roundedClasses:R}=Oe(l),{textColorClasses:r,textColorStyles:s}=Me(ce(l,"borderColor")),{t:F}=de(),S=h(()=>({"aria-label":F(l.closeLabel),onClick(o){d.value=!1,n("click:close",o)}}));return()=>{const o=!!(e.prepend||t.value),a=!!(e.title||l.title),v=!!(e.close||l.closable);return d.value&&c(l.tag,{class:["v-alert",l.border&&{"v-alert--border":!!l.border,[`v-alert--border-${l.border===!0?"start":l.border}`]:!0},{"v-alert--prominent":l.prominent},C.value,O.value,E.value,f.value,A.value,R.value,w.value,l.class],style:[M.value,u.value,g.value,l.style],role:"alert"},{default:()=>{var y,k;return[De(!1,"v-alert"),l.border&&c("div",{key:"border",class:["v-alert__border",r.value],style:s.value},null),o&&c("div",{key:"prepend",class:"v-alert__prepend"},[e.prepend?c(Y,{key:"prepend-defaults",disabled:!t.value,defaults:{VIcon:{density:l.density,icon:t.value,size:l.prominent?44:28}}},e.prepend):c(q,{key:"prepend-icon",density:l.density,icon:t.value,size:l.prominent?44:28},null)]),c("div",{class:"v-alert__content"},[a&&c(ot,{key:"title"},{default:()=>{var j;return[((j=e.title)==null?void 0:j.call(e))??l.title]}}),((y=e.text)==null?void 0:y.call(e))??l.text,(k=e.default)==null?void 0:k.call(e)]),e.append&&c("div",{key:"append",class:"v-alert__append"},[e.append()]),v&&c("div",{key:"close",class:"v-alert__close"},[e.close?c(Y,{key:"close-defaults",defaults:{VBtn:{icon:l.closeIcon,size:"x-small",variant:"text"}}},{default:()=>{var j;return[(j=e.close)==null?void 0:j.call(e,{props:S.value})]}}):c(L,ge({key:"close-btn",icon:l.closeIcon,size:"x-small",variant:"text"},S.value),null)])]}})}}}),dt={key:0,class:"text-right"},mt={key:1},ft={key:1,class:"text-red"},pt=U({__name:"ContractInteraction",props:{contract:{},address:{},provider:{}},setup(l){const{dltApi:b}=X(),{selectedNetwork:n}=be(X()),e=l,d=P({}),t=P(void 0),B=P([]),C=P(""),O=h(()=>{const r=$e(e.contract);return r?r.fragments.filter(s=>s.type==="function"||s.type==="event"):[]}),M=h(()=>O.value.map(r=>({title:r.format("minimal"),value:r}))),w=h(()=>{var r;return((r=t.value)==null?void 0:r.type)==="function"}),E=h(()=>{var r;return((r=t.value)==null?void 0:r.type)==="event"}),u=h(()=>{if(!t.value)return"mdi-cancel";const r=t.value;return r.type==="event"?"mdi-message-alert":r.stateMutability==="view"?"mdi-eye":r.stateMutability==="pure"?"mdi-calculator-variant-outline":r.stateMutability==="payable"?"mdi-cash":"mdi-cog-outline"}),f=h(()=>{if(!t.value)return!1;const r=t.value;return!(r.type==="event"||r.stateMutability==="view"||r.stateMutability==="pure"||r.stateMutability==="payable")});Q(t,()=>{d.value={},C.value=""});async function g(){if(!t.value)return;console.log("Calling contract",f.value,e.address,`${e.contract}.${t.value.name}`,...Object.values(d.value));const r={icon:f.value?"mdi-test-tube":u.value,call:`${e.contract}.${t.value.name}( ${Object.values(d.value).join(", ")} )`,code:Ce(n.value,e.address,`${e.contract}.${t.value.name}`,...Object.values(d.value))};C.value=r.code;try{const s=await xe(b().currentProvider,e.address,`${e.contract}.${t.value.name}`,...Object.values(d.value));console.log("Result",s),r.result=s}catch(s){"errorArgs"in s?r.error=s.errorArgs.join(" "):r.error=s.message}B.value.unshift(r)}async function A(){if(!t.value)return;console.log("Executing contract",e.address,`${e.contract}.${t.value.name}`,...Object.values(d.value));const r={icon:u.value,call:`${e.contract}.${t.value.name}( ${Object.values(d.value).join(", ")} )`,code:he(n.value,e.address,`${e.contract}.${t.value.name}`,...Object.values(d.value))};C.value=r.code;try{const s=await Ae(b().currentProvider,e.address,`${e.contract}.${t.value.name}`,...Object.values(d.value));console.log("Result",s),r.result=s}catch(s){"reason"in s?(r.error=s.reason,"method"in s&&(r.error+=` (method: ${s.method})`)):r.error=s.message}B.value.unshift(r)}async function R(){if(!t.value)return;console.log("Loading events",e.address,`${e.contract}.${t.value.name}`);const r={icon:u.value,call:`Event ${e.contract}.${t.value.name}()`,code:Te(n.value,e.address,`${e.contract}.${t.value.name}`)};C.value=r.code;try{const s=await Pe(b().currentProvider,e.address,`${e.contract}.${t.value.name}`);console.log("Result",s),r.result=s}catch(s){"reason"in s?(r.error=s.reason,"method"in s&&(r.error+=` (method: ${s.method})`)):r.error=s.message}B.value.unshift(r)}return(r,s)=>{const F=st,S=Ie,o=at;return i(),V(G,null,{default:m(()=>[c(Je,null,{default:m(()=>[T(" Contract "+x(e.contract),1)]),_:1}),c(Ze,null,{default:m(()=>[T(" located at "+x(e.address),1)]),_:1}),c(W,null,{default:m(()=>[c(Ke,{items:p(M),modelValue:p(t),"onUpdate:modelValue":s[0]||(s[0]=a=>H(t)?t.value=a:null),"prepend-inner-icon":p(u),clearable:""},null,8,["items","modelValue","prepend-inner-icon"]),p(w)?(i(),V(F,{key:0,fragment:p(t),modelValue:p(d),"onUpdate:modelValue":s[1]||(s[1]=a=>H(d)?d.value=a:null)},null,8,["fragment","modelValue"])):I("",!0),p(t)?I("",!0):(i(),V(ct,{key:1,type:"info",class:"ma-4"},{default:m(()=>s[2]||(s[2]=[T(" Select a function to display its parameters ")])),_:1}))]),_:1}),c(He,null,{default:m(()=>[c(Ge),p(E)?(i(),V(L,{key:0,color:"primary",onClick:R},{default:m(()=>s[3]||(s[3]=[T("List")])),_:1})):I("",!0),p(w)?(i(),V(L,{key:1,color:"primary",onClick:g},{default:m(()=>[T(x(p(f)?"Simulate":"Call"),1)]),_:1})):I("",!0),p(f)?(i(),V(L,{key:2,color:"primary",onClick:A},{default:m(()=>s[4]||(s[4]=[T("Execute")])),_:1})):I("",!0)]),_:1}),c(Qe),p(C)?(i(),V(z,{key:0},{default:m(()=>[c(le,null,{default:m(()=>[c(S,{text:p(C)},null,8,["text"])]),_:1})]),_:1})):I("",!0),c(ae,null,{default:m(()=>[s[5]||(s[5]=$("thead",null,[$("tr",null,[$("th",null,"Call"),$("th",{class:"text-center"},"Result / Error")])],-1)),$("tbody",null,[(i(!0),_(N,null,D(p(B),(a,v)=>(i(),_("tr",{key:v},[$("td",null,[c(L,{icon:"mdi-code-braces-box",class:"mr-2",size:"x-small",onClick:y=>C.value=a.code},null,8,["onClick"]),c(q,{class:"mr-2"},{default:m(()=>[T(x(a.icon),1)]),_:2},1024),T(" "+x(a.call),1)]),a.result!=null?(i(),_("td",dt,[Array.isArray(a.result)?(i(),V(o,{key:0,items:a.result,headers:""},null,8,["items"])):(i(),_("span",mt,x(a.result),1))])):(i(),_("td",ft,x(a.error),1))]))),128))])]),_:1})]),_:1})}}}),vt={key:0},At=U({__name:"interaction",setup(l){const b=ke(),n=P(""),e=P("");return Ve(()=>{b.query.contract&&(n.value=b.query.contract),b.query.address&&(e.value=b.query.address),!n.value||!e.value?Z().push("/get-started"):(Z().replace({query:{}}),Se().includes(n.value)?console.log("Contract",n.value,"found"):(console.error("Contract",n.value,"not found"),Z().push("/get-started")))}),(d,t)=>p(n)&&p(e)?(i(),_("div",vt,[c(pt,{contract:p(n),address:p(e)},null,8,["contract","address"])])):I("",!0)}});export{At as default};
