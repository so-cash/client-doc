import{m as Ue,g as fe,b as Ge,c as ze,V as we,a as xe,_ as He,d as We}from"./VTable-BIV-U7Es.js";import{p as Re,H as W,J as S,j as u,P as Je,a2 as ye,a3 as Qe,g as Ye,a4 as Ze,r as N,u as Ve,w as z,a5 as Ce,n as Ie,I as Xe,a as qe,c as n,m as q,a6 as el,a7 as ll,a8 as Fe,F as le,a9 as tl,aa as al,x as G,d as nl,V as _e,s as ul,b as ol,ab as Se,ac as sl,l as P,v as f,A as j,h as I,ad as rl,Z as pe,z as _,k as oe,ae as il,af as cl,t as U,q as dl,e as Me}from"./index-WfTFCtqT.js";import{u as vl,m as fl,V as ml,a as yl,b as gl}from"./VSelect-Dq9AFVjZ.js";import{h as bl,i as hl,t as ae,b as se,f as kl,j as wl,c as xl,d as ge}from"./VTextField-DgZFBKsv.js";import{i as Vl,n as Cl,a as ee,o as Il,V as Fl}from"./VGrid-BqrAlPFS.js";import{a as _l}from"./VChip-D5y99nJW.js";import{a as me}from"./VBtn-BWzWl63Y.js";const Sl=(e,b,o)=>e==null||b==null?-1:e.toString().toLocaleLowerCase().indexOf(b.toString().toLocaleLowerCase()),pl=Re({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function Ml(e,b,o){var m;const i=[],K=(o==null?void 0:o.default)??Sl,k=o!=null&&o.filterKeys?ye(o.filterKeys):!1,F=Object.keys((o==null?void 0:o.customKeyFilter)??{}).length;if(!(e!=null&&e.length))return i;e:for(let x=0;x<e.length;x++){const[V,p=V]=ye(e[x]),D={},d={};let a=-1;if((b||F>0)&&!(o!=null&&o.noFilter)){if(typeof V=="object"){const M=k||Object.keys(p);for(const R of M){const J=Qe(p,R),T=(m=o==null?void 0:o.customKeyFilter)==null?void 0:m[R];if(a=T?T(J,b,V):K(J,b,V),a!==-1&&a!==!1)T?D[R]=a:d[R]=a;else if((o==null?void 0:o.filterMode)==="every")continue e}}else a=K(V,b,V),a!==-1&&a!==!1&&(d.title=a);const h=Object.keys(d).length,$=Object.keys(D).length;if(!h&&!$||(o==null?void 0:o.filterMode)==="union"&&$!==F&&!h||(o==null?void 0:o.filterMode)==="intersection"&&($!==F||!h))continue}i.push({index:x,matches:{...d,...D}})}return i}function Rl(e,b,o,i){const K=W([]),k=W(new Map),F=S(()=>u(b));Je(()=>{const x=typeof o=="function"?o():u(o),V=typeof x!="string"&&typeof x!="number"?"":String(x),p=Ml(F.value,V,{customKeyFilter:{...e.customKeyFilter,...u(i==null?void 0:i.customKeyFilter)},default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),D=u(b),d=[],a=new Map;p.forEach(h=>{let{index:$,matches:M}=h;const R=D[$];d.push(R),a.set(R.value,M)}),K.value=d,k.value=a});function m(x){return k.value.get(x.value)}return{filteredItems:K,filteredMatches:k,getMatches:m}}function Al(e,b,o){if(b==null)return e;if(Array.isArray(b))throw new Error("Multiple matches is not implemented");return typeof b=="number"&&~b?n(le,null,[n("span",{class:"v-combobox__unmask"},[e.substr(0,b)]),n("span",{class:"v-combobox__mask"},[e.substr(b,o)]),n("span",{class:"v-combobox__unmask"},[e.substr(b+o)])]):e}const Pl=Re({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:{type:Boolean,default:!0},delimiters:Array,...pl({filterKeys:["title"]}),...fl({hideNoData:!0,returnObject:!0}),...el(wl({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...Cl({transition:!1})},"VCombobox"),Dl=Ye()({name:"VCombobox",props:Pl(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:search":e=>!0,"update:menu":e=>!0},setup(e,b){var be;let{emit:o,slots:i}=b;const{t:K}=Ze(),k=N(),F=W(!1),m=W(!0),x=W(!1),V=N(),p=N(),D=Ve(e,"menu"),d=S({get:()=>D.value,set:l=>{var r;D.value&&!l&&((r=V.value)!=null&&r.Î¨openChildren.size)||(D.value=l)}}),a=W(-1);let h=!1;const $=S(()=>{var l;return(l=k.value)==null?void 0:l.color}),M=S(()=>d.value?e.closeText:e.openText),{items:R,transformIn:J,transformOut:T}=bl(e),{textColorClasses:re,textColorStyles:ie}=Vl($),v=Ve(e,"modelValue",[],l=>J(ye(l)),l=>{const r=T(l);return e.multiple?r:r[0]??null}),Q=hl(e),Y=S(()=>!!(e.chips||i.chip)),s=S(()=>Y.value||!!i.selection),t=W(!e.multiple&&!s.value?((be=v.value[0])==null?void 0:be.title)??"":""),g=S({get:()=>t.value,set:l=>{var r;if(t.value=l??"",!e.multiple&&!s.value&&(v.value=[ae(e,l)]),l&&e.multiple&&((r=e.delimiters)!=null&&r.length)){const w=l.split(new RegExp(`(?:${e.delimiters.join("|")})+`));w.length>1&&(w.forEach(c=>{c=c.trim(),c&&O(ae(e,c))}),t.value="")}l||(a.value=-1),m.value=!l}}),te=S(()=>typeof e.counterValue=="function"?e.counterValue(v.value):typeof e.counterValue=="number"?e.counterValue:e.multiple?v.value.length:g.value.length);z(t,l=>{h?Ie(()=>h=!1):F.value&&!d.value&&(d.value=!0),o("update:search",l)}),z(v,l=>{var r;!e.multiple&&!s.value&&(t.value=((r=l[0])==null?void 0:r.title)??"")});const{filteredItems:Z,getMatches:C}=Rl(e,R,()=>m.value?"":g.value),L=S(()=>e.hideSelected?Z.value.filter(l=>!v.value.some(r=>r.value===l.value)):Z.value),Ae=S(()=>v.value.map(l=>l.value)),ce=S(()=>{var r;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&g.value===((r=L.value[0])==null?void 0:r.title))&&L.value.length>0&&!m.value&&!x.value}),de=S(()=>e.hideNoData&&!L.value.length||Q.isReadonly.value||Q.isDisabled.value),ve=N(),Pe=vl(ve,k);function De(l){h=!0,e.openOnClear&&(d.value=!0)}function Ee(){de.value||(d.value=!0)}function Ne(l){de.value||(F.value&&(l.preventDefault(),l.stopPropagation()),d.value=!d.value)}function Te(l){var r;l.key!==" "&&Fe(l)&&((r=k.value)==null||r.focus())}function Be(l){var c;if(ll(l)||Q.isReadonly.value)return;const r=k.value.selectionStart,w=v.value.length;if(["Enter","ArrowDown","ArrowUp"].includes(l.key)&&l.preventDefault(),["Enter","ArrowDown"].includes(l.key)&&(d.value=!0),["Escape"].includes(l.key)&&(d.value=!1),["Enter","Escape","Tab"].includes(l.key)&&(ce.value&&["Enter","Tab"].includes(l.key)&&!v.value.some(y=>{let{value:B}=y;return B===L.value[0].value})&&O(Z.value[0]),m.value=!0),l.key==="ArrowDown"&&ce.value&&((c=ve.value)==null||c.focus("next")),l.key==="Enter"&&g.value&&(O(ae(e,g.value)),s.value&&(t.value="")),["Backspace","Delete"].includes(l.key)){if(!e.multiple&&s.value&&v.value.length>0&&!g.value)return O(v.value[0],!1);if(~a.value){l.preventDefault();const y=a.value;O(v.value[a.value],!1),a.value=y>=w-1?w-2:y}else l.key==="Backspace"&&!g.value&&(a.value=w-1);return}if(e.multiple)if(l.key==="ArrowLeft"){if(a.value<0&&r>0)return;const y=a.value>-1?a.value-1:w-1;v.value[y]?a.value=y:(a.value=-1,k.value.setSelectionRange(g.value.length,g.value.length))}else if(l.key==="ArrowRight"){if(a.value<0)return;const y=a.value+1;v.value[y]?a.value=y:(a.value=-1,k.value.setSelectionRange(0,0))}else~a.value&&Fe(l)&&(a.value=-1)}function Ke(){var l;e.eager&&((l=p.value)==null||l.calculateVisibleItems())}function Le(){var l;F.value&&(m.value=!0,(l=k.value)==null||l.focus())}function O(l){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(!l||l.props.disabled))if(e.multiple){const w=v.value.findIndex(y=>(e.valueComparator||Ce)(y.value,l.value)),c=r??!~w;if(~w){const y=c?[...v.value,l]:[...v.value];y.splice(w,1),v.value=y}else c&&(v.value=[...v.value,l]);e.clearOnSelect&&(g.value="")}else{const w=r!==!1;v.value=w?[l]:[],t.value=w&&!s.value?l.title:"",Ie(()=>{d.value=!1,m.value=!0})}}function Oe(l){F.value=!0,setTimeout(()=>{x.value=!0})}function je(l){x.value=!1}function $e(l){(l==null||l===""&&!e.multiple&&!s.value)&&(v.value=[])}return z(F,(l,r)=>{if(!(l||l===r)&&(a.value=-1,d.value=!1,g.value)){if(e.multiple){O(ae(e,g.value));return}if(!s.value)return;v.value.some(w=>{let{title:c}=w;return c===g.value})?t.value="":O(ae(e,g.value))}}),z(d,()=>{if(!e.hideSelected&&d.value&&v.value.length){const l=L.value.findIndex(r=>v.value.some(w=>(e.valueComparator||Ce)(w.value,r.value)));Xe&&window.requestAnimationFrame(()=>{var r;l>=0&&((r=p.value)==null||r.scrollToIndex(l))})}}),z(()=>e.items,(l,r)=>{d.value||F.value&&!r.length&&l.length&&(d.value=!0)}),qe(()=>{const l=!!(!e.hideNoData||L.value.length||i["prepend-item"]||i["append-item"]||i["no-data"]),r=v.value.length>0,w=se.filterProps(e);return n(se,q({ref:k},w,{modelValue:g.value,"onUpdate:modelValue":[c=>g.value=c,$e],focused:F.value,"onUpdate:focused":c=>F.value=c,validationValue:v.externalValue,counterValue:te.value,dirty:r,class:["v-combobox",{"v-combobox--active-menu":d.value,"v-combobox--chips":!!e.chips,"v-combobox--selection-slot":!!s.value,"v-combobox--selecting-index":a.value>-1,[`v-combobox--${e.multiple?"multiple":"single"}`]:!0},e.class],style:e.style,readonly:Q.isReadonly.value,placeholder:r?void 0:e.placeholder,"onClick:clear":De,"onMousedown:control":Ee,onKeydown:Be}),{...i,default:()=>n(le,null,[n(ml,q({ref:V,modelValue:d.value,"onUpdate:modelValue":c=>d.value=c,activator:"parent",contentClass:"v-combobox__content",disabled:de.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:Ke,onAfterLeave:Le},e.menuProps),{default:()=>[l&&n(xl,q({ref:ve,selected:Ae.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:c=>c.preventDefault(),onKeydown:Te,onFocusin:Oe,onFocusout:je,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},Pe,e.listProps),{default:()=>{var c,y,B;return[(c=i["prepend-item"])==null?void 0:c.call(i),!L.value.length&&!e.hideNoData&&(((y=i["no-data"])==null?void 0:y.call(i))??n(ge,{key:"no-data",title:K(e.noDataText)},null)),n(yl,{ref:p,renderless:!0,items:L.value},{default:H=>{var ke;let{item:A,index:X,itemRef:E}=H;const he=q(A.props,{ref:E,key:A.value,active:ce.value&&X===0?!0:void 0,onClick:()=>O(A,null)});return((ke=i.item)==null?void 0:ke.call(i,{item:A,index:X,props:he}))??n(ge,q(he,{role:"option"}),{prepend:ne=>{let{isSelected:ue}=ne;return n(le,null,[e.multiple&&!e.hideSelected?n(gl,{key:A.value,modelValue:ue,ripple:!1,tabindex:"-1"},null):void 0,A.props.prependAvatar&&n(Il,{image:A.props.prependAvatar},null),A.props.prependIcon&&n(ee,{icon:A.props.prependIcon},null)])},title:()=>{var ne,ue;return m.value?A.title:Al(A.title,(ne=C(A))==null?void 0:ne.title,((ue=g.value)==null?void 0:ue.length)??0)}})}}),(B=i["append-item"])==null?void 0:B.call(i)]}})]}),v.value.map((c,y)=>{function B(E){E.stopPropagation(),E.preventDefault(),O(c,!1)}const H={"onClick:close":B,onKeydown(E){E.key!=="Enter"&&E.key!==" "||(E.preventDefault(),E.stopPropagation(),B(E))},onMousedown(E){E.preventDefault(),E.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},A=Y.value?!!i.chip:!!i.selection,X=A?al(Y.value?i.chip({item:c,index:y,props:H}):i.selection({item:c,index:y})):void 0;if(!(A&&!X))return n("div",{key:c.value,class:["v-combobox__selection",y===a.value&&["v-combobox__selection--selected",re.value]],style:y===a.value?ie.value:{}},[Y.value?i.chip?n(Fl,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:c.title}}},{default:()=>[X]}):n(_l,q({key:"chip",closable:e.closableChips,size:"small",text:c.title,disabled:c.props.disabled},H),null):X??n("span",{class:"v-combobox__selection-text"},[c.title,e.multiple&&y<v.value.length-1&&n("span",{class:"v-combobox__selection-comma"},[G(",")])])])})]),"append-inner":function(){var H;for(var c=arguments.length,y=new Array(c),B=0;B<c;B++)y[B]=arguments[B];return n(le,null,[(H=i["append-inner"])==null?void 0:H.call(i,...y),(!e.hideNoData||e.items.length)&&e.menuIcon?n(ee,{class:"v-combobox__menu-icon",icon:e.menuIcon,onMousedown:Ne,onClick:tl,"aria-label":K(M.value),title:K(M.value),tabindex:"-1"},null):void 0])}})}),kl({isFocused:F,isPristine:m,menu:d,search:g,selectionIndex:a,filteredItems:Z,select:O},k)}}),El={key:0,class:"text-red"},Nl={class:"d-flex align-center"},Tl={class:"text-caption"},Bl={class:"text-caption"},Kl={key:0,class:"d-flex align-center"},Ll={key:0,class:"ml-2"},Ol={key:1,class:"d-flex align-center"},jl={key:2,class:"d-flex align-center pl-5"},$l={key:3,class:"d-flex align-center"},Ul={key:4,class:"d-flex align-center"},Gl={key:5,class:"d-flex align-center"},zl={key:0},Hl={key:1},Wl={key:0},Jl={key:0},tt=nl({__name:"get-started",setup(e){const{connectNetwork:b,dltApi:o}=_e(),{selectedChainId:i,currentWallet:K,selectedNetwork:k,selectedProvider:F}=ul(_e()),m=N(""),x=N([]),V=N(""),p=N(!1),D=N(""),d=N([]),a=N(k.value),h=N(null),$=S(()=>!!F.value),M=S(()=>{var s;return!!K.value&&a.value&&((s=a.value)==null?void 0:s.chainId)===i.value}),R=N(null),J=S(()=>R.value?R.value:a.value?M.value?`Connected to ${a.value.name} (${a.value.chainId})`:`${d.value.length} networks found`:"No network selected");let T=null;async function re(){m.value&&(await Se.setItem("globalRefAddress",m.value),p.value=!0)}ol(async()=>{T=o(),m.value=await Se.getItem("globalRefAddress"),m.value&&(p.value=!0)}),z(D,async s=>{if(!s||s.length<2){d.value=[];return}d.value=await sl(s)});async function ie(s){try{R.value=null,await b(s)}catch(t){R.value="Lock/Unlock your wallet manually and try again; "+t.message}}async function v(){if(T=o(),!m.value||!T){x.value=[];return}try{const s=await ze(T.currentProvider,m.value,fe("ISoCashGlobalReferentialFull","CountrySet"));console.log("events",s),x.value=s.map(t=>({country:rl.from(t.returnValues[0].v.slice(-4),"hex").toString(),address:t.returnValues[1].v}))}catch{x.value=[]}}z(m,async s=>{await v()}),z(k,async s=>{console.log("selectedNetwork changed",s==null?void 0:s.chainId),a.value=s,await v()}),z(a,async s=>{console.log("network changed",s==null?void 0:s.chainId),R.value=null,k.value=s});async function Q(){if(!V.value||!T)return;const s=V.value;console.log("ibanToResolve",s);try{const t=await We(T.currentProvider,m.value,fe("ISoCashGlobalReferentialFull","decodeIBANToContracts"),s);console.log("resolved",t),h.value=Object.fromEntries(t.map(({name:g,v:te})=>[g,te]))}catch(t){h.value={error:t.message}}}const Y=S(()=>Ue(a.value,m.value,fe("ISoCashGlobalReferentialFull","decodeIBANToContracts"),V.value));return(s,t)=>{const g=pe("router-link"),te=pe("MarkdownDoc"),Z=He;return _(),P(le,null,[t[20]||(t[20]=f("h2",{class:"mb-3"},"Get started with your configuration",-1)),u($)?j("",!0):(_(),P("div",El," Install Metamask or a EIP-6936 compatible wallet ")),n(Ge,null,{default:I(()=>[n(we,{cols:"6"},{default:I(()=>[t[19]||(t[19]=f("div",{class:"d-flex align-center"}," Connect to an EVM network (ensure your wallet is unlocked) ",-1)),f("div",Nl,[n(Dl,{items:u(d),"item-title":"name","item-value":"chainId","return-object":"",modelValue:u(a),"onUpdate:modelValue":[t[0]||(t[0]=C=>oe(a)?a.value=C:null),t[2]||(t[2]=C=>k.value=u(a))],search:u(D),"onUpdate:search":t[1]||(t[1]=C=>oe(D)?D.value=C:null),label:"EVM network",messages:u(J),outlined:"",dense:"",clearable:""},{item:I(({item:C,props:L})=>[n(ge,il(cl(L)),{default:I(()=>[f("div",Tl,U(C.raw.title),1),f("div",Bl,"chain id: "+U(C.raw.chainId),1)]),_:2},1040)]),_:1},8,["items","modelValue","search","messages"]),n(me,{class:"ml-2 mb-4",color:"primary",disabled:!u(a)||u(M),onClick:t[3]||(t[3]=C=>ie(u(a)))},{default:I(()=>t[6]||(t[6]=[G("Connect")])),_:1},8,["disabled"])]),u(M)?(_(),P("div",Kl,[t[8]||(t[8]=G(" Initialize the referential address ")),u(m)?(_(),P("span",Ll,[n(g,{to:`/interaction?contract=ISoCashGlobalReferentialFull&address=${u(m)}`},{default:I(()=>[n(ee,null,{default:I(()=>t[7]||(t[7]=[G("mdi-open-in-app")])),_:1})]),_:1},8,["to"])])):j("",!0)])):j("",!0),u(M)?(_(),P("div",Ol,[n(se,{modelValue:u(m),"onUpdate:modelValue":t[4]||(t[4]=C=>oe(m)?m.value=C:null),label:"Global Referential Address (0x...)",outlined:"",dense:"","hide-details":""},null,8,["modelValue"]),n(me,{class:"ml-2",color:"primary",onClick:re},{default:I(()=>[G(U(u(p)?"Replace":"save"),1)]),_:1})])):j("",!0),u(M)?(_(),P("div",jl,[n(xe,null,{default:I(()=>[t[10]||(t[10]=f("thead",null,[f("tr",null,[f("th",null,"Country"),f("th",null,"Referential contract"),f("th",null,"Inspect")])],-1)),f("tbody",null,[(_(!0),P(le,null,dl(u(x),C=>(_(),P("tr",{key:C.address},[f("td",null,U(C.country),1),f("td",null,U(C.address),1),f("td",null,[n(g,{to:`/interaction?contract=ISoCashCountryReferentialFull&address=${C.address}`},{default:I(()=>[n(ee,null,{default:I(()=>t[9]||(t[9]=[G("mdi-open-in-app")])),_:1})]),_:2},1032,["to"])])]))),128))])]),_:1})])):j("",!0),u(M)&&u(p)?(_(),P("div",$l," Try to resolve an IBAN ")):j("",!0),u(M)&&u(p)?(_(),P("div",Ul,[n(se,{modelValue:u(V),"onUpdate:modelValue":t[5]||(t[5]=C=>oe(V)?V.value=C:null),label:"IBAN to resolve an account",outlined:"",dense:"","hide-details":""},null,8,["modelValue"]),n(me,{class:"ml-2",color:"primary",onClick:Q},{default:I(()=>t[11]||(t[11]=[G("Find account")])),_:1})])):j("",!0),u(M)&&u(p)&&u(h)?(_(),P("div",Gl,[u(h).error?(_(),P("span",zl,"Fail : "+U(u(h).error),1)):(_(),P("div",Hl,[n(xe,null,{default:I(()=>[t[18]||(t[18]=f("thead",null,[f("tr",null,[f("th",null,"Result"),f("th",null,"Value"),f("th",null,"Inspect")])],-1)),f("tbody",null,[f("tr",null,[t[12]||(t[12]=f("td",null,"Valid?",-1)),f("td",null,U(u(h).valid?"Yes":"No"),1),t[13]||(t[13]=f("td",null,null,-1))]),f("tr",null,[t[15]||(t[15]=f("td",null,"Bank",-1)),f("td",null,U(u(h).bank),1),u(h).valid?(_(),P("td",Wl,[n(g,{to:`/interaction?contract=ISoCashBankExternal&address=${u(h).bank}`},{default:I(()=>[n(ee,null,{default:I(()=>t[14]||(t[14]=[G("mdi-open-in-app")])),_:1})]),_:1},8,["to"])])):j("",!0)]),f("tr",null,[t[17]||(t[17]=f("td",null,"Account",-1)),f("td",null,U(u(h).account),1),u(h).valid?(_(),P("td",Jl,[n(g,{to:`/interaction?contract=ISoCashAccountFull&address=${u(h).account}`},{default:I(()=>[n(ee,null,{default:I(()=>t[16]||(t[16]=[G("mdi-open-in-app")])),_:1})]),_:1},8,["to"])])):j("",!0)])])]),_:1})]))])):j("",!0)]),_:1}),n(we,null,{default:I(()=>[u(V)?(_(),Me(Z,{key:1,text:u(Y)},null,8,["text"])):(_(),Me(te,{key:0,source:"initiate-referential"}))]),_:1})]),_:1})],64)}}});export{tt as default};
