import{d as z,M as le,c as b,a as o,H as m,P as k,W as $,L as _,Q as U,S as D,K as I,J as A,e as i,r as B,i as S,y as se,w as q,T as f,aa as Q,ah as G,a9 as H,g as me,p as pe,v as fe,f as ve,D as ye,t as ge,Z as _e,k as ke,m as be,E as Ve,b as Ce,R as he,B as xe,F as ee,a6 as $e,o as re,ai as Te,I as K}from"./index-dtcq5th2.js";import{a as X,V as oe,b as J,P as Ae,F as ue,e as te,m as Ie,d as Pe,f as we,h as Se,i as Be,c as Ee,l as Re}from"./VTable-DvGnISoN.js";import{l as L,p as je,q as Me,j as Oe,b as Fe,c as Ne,h as Ue,r as De,m as Le,d as ze,k as We,s as qe,f as ae}from"./VGrid-D6UyYA6i.js";import{_ as Je}from"./MarkdownDynamic.vue_vue_type_script_setup_true_lang-BIkDnilr.js";import{a as N,u as Ze,b as He,m as Ke,c as Qe}from"./VBtn-Cxp5XXzq.js";import{a as Y,b as Z,c as Ge,d as Xe,V as Ye}from"./VCard-lGYCYMuD.js";import{V as ne,j as et,k as tt}from"./VSelect-BQTHdjwj.js";import{V as at}from"./VSpacer-C4E4vreF.js";import{_ as nt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./VChip-CsiWMbVW.js";import"./VOverlay-DNHfNpqX.js";const lt={key:0},st={class:"text-right align-center text-no-wrap"},rt={key:1},ot={key:0},ie=z({__name:"CallResult",props:{items:{},headers:{type:Boolean}},emits:["change:target"],setup(a,{emit:T}){const n=a,l=T;function s(c,d){l("change:target",{contract:c,address:d})}const u=c=>{if(!c)return"";c.startsWith("0x")&&(c=c.slice(2));const d=new Uint8Array(c.match(/.{1,2}/g).map(V=>parseInt(V,16)));return new TextDecoder().decode(d)};return(c,d)=>{const V=le("CallResult",!0);return o(),b(X,{density:"compact"},{default:m(()=>[n.headers?(o(),k("thead",lt,d[0]||(d[0]=[_("tr",null,[_("th",{class:"text-left"},"Name"),_("th",{class:"text-right"},"Value")],-1)]))):$("",!0),_("tbody",null,[(o(!0),k(U,null,D(n.items,(r,E)=>(o(),k("tr",{key:E},[_("td",null,I(r.name),1),_("td",st,[r.type=="array"||r.type=="tuple"?(o(),b(V,{key:0,items:r.v},null,8,["items"])):(o(),k("span",rt,[A(I(r.v)+" ",1),r.solType.startsWith("bytes")?(o(),k("span",ot,"(= "+I(u(r.v))+")",1)):$("",!0),r.isInterface?(o(),b(L,{key:1,class:"ml-2",onClick:P=>s(r.type,r.v)},{default:m(()=>d[1]||(d[1]=[A("mdi-open-in-app")])),_:2},1032,["onClick"])):$("",!0)]))])]))),128))])]),_:1})}}}),ut={key:0},it={key:0},ct={key:0},dt={class:"text-left"},mt={key:1},pt=z({__name:"EventsResult",props:{items:{},headers:{type:Boolean},signature:{type:Boolean}},emits:["change:target"],setup(a,{emit:T}){const n=a,l=T;function s({contract:u,address:c}){l("change:target",{contract:u,address:c})}return(u,c)=>{const d=ie;return o(),b(X,{density:"compact"},{default:m(()=>[n.headers?(o(),k("thead",ut,[_("tr",null,[c[0]||(c[0]=_("th",null,"block:tx:log",-1)),n.signature?(o(),k("th",it,"Signature")):$("",!0),c[1]||(c[1]=_("th",{class:"text-center"},"Returned values",-1))])])):$("",!0),_("tbody",null,[n.items.length?(o(!0),k(U,{key:0},D(n.items,(V,r)=>(o(),k("tr",{key:r},[_("td",null,I(V.id),1),n.signature?(o(),k("td",ct,I(V.eventSignature),1)):$("",!0),_("td",dt,[i(d,{items:V.returnValues,"onChange:target":s},null,8,["items"])])]))),128)):(o(),k("tr",mt,c[2]||(c[2]=[_("td",{class:"text-center"},"No events",-1)])))])]),_:1})}}}),ft={class:"d-flex align-center mb-2"},vt={class:"text-subtitle-1"},yt=z({__name:"ABICaptureType",props:{parent:{},param:{},modelValue:{},depth:{}},emits:["update:modelValue"],setup(a,{emit:T}){const n=a,l=B(""),s=B(!1),u=B({}),c=T,d=S(()=>(n.depth||0)>0),V=t=>t.endsWith("[]"),r=t=>t==="tuple",E=t=>t.type==="address",P=t=>t.replace("[]",""),O=t=>({uint256:"number",string:"text",address:"text",bool:"checkbox",bytes32:"text"})[t]||"text";function p(t){let e="";if(r(t.type)){e={};for(const y of t.components)e[y.name]=p(y);return e}else return V(t.type)?[]:E(t)?G:""}const v=()=>u.value||[],h=()=>{u.value=[...v(),""],j()},w=t=>{u.value=v().filter((e,y)=>y!==t),j()};function R(t){return t.startsWith("0x")?Number(t):parseInt(t)}function W(t,e){const y=parseInt(t.replace("bytes","")||"0");let g=e.startsWith("0x")?H.from(e.substring(2),"hex"):H.from(e);if(y>0){const x=H.alloc(y,0);g.copy(x,0,0,y),g=x}return"0x"+g.toString("hex")}function F(t,e){if(Array.isArray(e)){const y=Ae.from(P(t.type));return e.map(g=>F(y,g))}else if(typeof e=="object"){const y={...e};return Object.keys(e).forEach((g,x)=>{y[g]=F(t.components[x],e[g])}),y}else switch(t.type){case"address":return e||G;case"bool":return e?"true":"false";default:return/uint[0-9]*/.test(t.type)?R(`${e}`):/int[0-9]*/.test(t.type)?R(`${e}`):/bytes[0-9]*/.test(t.type)?W(t.type,`${e}`):e}}const j=(t,e)=>{const y=Array.isArray(u.value)?[...u.value]:typeof u.value=="object"?{...u.value}:u.value;c("update:modelValue",F(n.param,y))};return S(()=>!n.param),se(()=>{var t;if(console.log("watchEffect param called",(t=n.param)==null?void 0:t.name,l.value,s.value,JSON.stringify(n.modelValue,null,2)),n.param){const e=n.parent+"."+n.param.format("full");if(e!=l.value&&(l.value=e,s.value=!1),!s.value){s.value=!0;const y=n.modelValue||p(n.param);u.value=y,j()}}}),q(u,t=>{j()}),(t,e)=>{const y=le("ABICaptureType",!0);return o(),b(oe,{cols:"12",md:d.value?12:6},{default:m(()=>[V(n.param.type)?(o(),k(U,{key:0},[_("div",ft,[_("span",vt,I(n.param.name)+" ("+I(n.param.type)+")",1),i(N,{icon:"",size:"x-small",class:"ml-2",onClick:e[0]||(e[0]=g=>h())},{default:m(()=>[i(L,null,{default:m(()=>e[5]||(e[5]=[A("mdi-plus")])),_:1})]),_:1})]),(o(!0),k(U,null,D(v(),(g,x)=>(o(),k("div",{key:x,class:"d-flex align-center mb-2"},[i(ne,{modelValue:f(u)[x],"onUpdate:modelValue":[M=>f(u)[x]=M,e[1]||(e[1]=M=>j())],label:`Element ${x+1}`,density:"compact","hide-details":"",variant:"outlined",type:O(P(n.param.type))},null,8,["modelValue","onUpdate:modelValue","label","type"]),i(N,{icon:"",size:"x-small",class:"ml-2",onClick:M=>w(x)},{default:m(()=>[i(L,null,{default:m(()=>e[6]||(e[6]=[A("mdi-close")])),_:1})]),_:2},1032,["onClick"])]))),128))],64)):r(n.param.type)?(o(),b(Y,{key:1,class:"ma-0 pa-1",variant:"outlined"},{default:m(()=>[i(Z,null,{default:m(()=>[i(J,null,{default:m(()=>[A(I(n.param.name)+":",1)]),_:1}),i(J,null,{default:m(()=>[(o(!0),k(U,null,D(n.param.components,g=>(o(),b(y,{key:g.name,parent:n.param.name,param:g,modelValue:f(u)[g.name],"onUpdate:modelValue":[x=>f(u)[g.name]=x,e[2]||(e[2]=x=>j())],depth:(n.depth||0)+1},null,8,["parent","param","modelValue","onUpdate:modelValue","depth"]))),128))]),_:1})]),_:1})]),_:1})):(o(),b(ne,{key:2,modelValue:f(u),"onUpdate:modelValue":e[3]||(e[3]=g=>Q(u)?u.value=g:null),label:`${n.param.name} (${n.param.type})`,density:"compact",variant:"outlined",type:O(n.param.type),clearable:"","onClick:clear":e[4]||(e[4]=g=>u.value=p(n.param))},null,8,["modelValue","label","type"]))]),_:1},8,["md"])}}}),gt=z({__name:"ABICaptureFunction",props:{item:{},modelValue:{}},emits:["update:modelValue"],setup(a,{emit:T}){const n=a,l=S(()=>ue.from(n.item)),s=B({}),u=B(""),c=B(!1),d=T,V=p=>p.endsWith("[]"),r=p=>p==="tuple",E=p=>p.type==="address";function P(p){let v="";if(r(p.type)){v={};for(const h of p.components)v[h.name]=P(h);return v}else return V(p.type)?[]:E(p)?G:""}S(()=>{var p,v;return((v=(p=l.value)==null?void 0:p.inputs)==null?void 0:v.filter(h=>h.type!=="tuple"||h.components))||[]});const O=(p,v)=>{const h={...s.value};d("update:modelValue",{...h})};return S(()=>!l.value||l.value.inputs.length==0),se(()=>{var p;if(l.value){const v=l.value.format("full");if(v!=u.value&&(c.value=!1,u.value=v),console.log("watchEffect function called",(p=l.value)==null?void 0:p.name,u.value,c.value,JSON.stringify(n.modelValue,null,2)),!c.value){c.value=!0;const h=n.modelValue||{};l.value.inputs.forEach(w=>{h[w.name]=P(w)}),s.value=h,O()}}}),q(s,p=>{O()}),(p,v)=>{const h=yt;return l.value?(o(),b(Y,{key:0,class:"ma-0 pa-2",variant:"outlined"},{default:m(()=>[l.value.inputs.length>0?(o(),b(Z,{key:0},{default:m(()=>[i(J,null,{default:m(()=>[(o(!0),k(U,null,D(l.value.inputs,w=>(o(),b(h,{parent:l.value.name,param:w,modelValue:f(s)[w.name],"onUpdate:modelValue":[R=>f(s)[w.name]=R,v[0]||(v[0]=R=>O())]},null,8,["parent","param","modelValue","onUpdate:modelValue"]))),256))]),_:1})]),_:1})):(o(),b(Z,{key:1},{default:m(()=>v[1]||(v[1]=[A(" No parameters needed ")])),_:1}))]),_:1})):$("",!0)}}}),_t=je("v-alert-title"),kt=["success","info","warning","error"],bt=pe({border:{type:[Boolean,String],validator:a=>typeof a=="boolean"||["top","end","bottom","start"].includes(a)},borderColor:String,closable:Boolean,closeIcon:{type:he,default:"$close"},closeLabel:{type:String,default:"$vuetify.close"},icon:{type:[Boolean,String,Function,Object],default:null},modelValue:{type:Boolean,default:!0},prominent:Boolean,title:String,text:String,type:{type:String,validator:a=>kt.includes(a)},...Ce(),...We(),...Ve(),...ze(),...Qe(),...Ke(),...Le(),...be(),...ke(),...De({variant:"flat"})},"VAlert"),Vt=me()({name:"VAlert",props:bt(),emits:{"click:close":a=>!0,"update:modelValue":a=>!0},setup(a,T){let{emit:n,slots:l}=T;const s=fe(a,"modelValue"),u=S(()=>{if(a.icon!==!1)return a.type?a.icon??`$${a.type}`:a.icon}),c=S(()=>({color:a.color??a.type,variant:a.variant})),{themeClasses:d}=ve(a),{colorClasses:V,colorStyles:r,variantClasses:E}=Me(c),{densityClasses:P}=Oe(a),{dimensionStyles:O}=ye(a),{elevationClasses:p}=Fe(a),{locationStyles:v}=Ze(a),{positionClasses:h}=He(a),{roundedClasses:w}=Ne(a),{textColorClasses:R,textColorStyles:W}=Ue(ge(a,"borderColor")),{t:F}=_e(),j=S(()=>({"aria-label":F(a.closeLabel),onClick(t){s.value=!1,n("click:close",t)}}));return()=>{const t=!!(l.prepend||u.value),e=!!(l.title||a.title),y=!!(l.close||a.closable);return s.value&&i(a.tag,{class:["v-alert",a.border&&{"v-alert--border":!!a.border,[`v-alert--border-${a.border===!0?"start":a.border}`]:!0},{"v-alert--prominent":a.prominent},d.value,V.value,P.value,p.value,h.value,w.value,E.value,a.class],style:[r.value,O.value,v.value,a.style],role:"alert"},{default:()=>{var g,x;return[qe(!1,"v-alert"),a.border&&i("div",{key:"border",class:["v-alert__border",R.value],style:W.value},null),t&&i("div",{key:"prepend",class:"v-alert__prepend"},[l.prepend?i(ae,{key:"prepend-defaults",disabled:!u.value,defaults:{VIcon:{density:a.density,icon:u.value,size:a.prominent?44:28}}},l.prepend):i(L,{key:"prepend-icon",density:a.density,icon:u.value,size:a.prominent?44:28},null)]),i("div",{class:"v-alert__content"},[e&&i(_t,{key:"title"},{default:()=>{var M;return[((M=l.title)==null?void 0:M.call(l))??a.title]}}),((g=l.text)==null?void 0:g.call(l))??a.text,(x=l.default)==null?void 0:x.call(l)]),l.append&&i("div",{key:"append",class:"v-alert__append"},[l.append()]),y&&i("div",{key:"close",class:"v-alert__close"},[l.close?i(ae,{key:"close-defaults",defaults:{VBtn:{icon:a.closeIcon,size:"x-small",variant:"text"}}},{default:()=>{var M;return[(M=l.close)==null?void 0:M.call(l,{props:j.value})]}}):i(N,xe({key:"close-btn",icon:a.closeIcon,size:"x-small",variant:"text"},j.value),null)])]}})}}}),Ct={class:"align-cell-top"},ht={class:"text-caption"},xt={key:0,class:"text-right"},$t={key:2},Tt={key:1,class:"text-red"},At=z({__name:"ContractInteraction",props:{contract:{},address:{},provider:{}},emits:["change:target"],setup(a,{emit:T}){const{dltApi:n}=ee(),{selectedNetwork:l}=$e(ee()),s=a,u=T;function c({contract:t,address:e}){console.log("Change target",e,t),u("change:target",{contract:t,address:e})}const d=B({}),V=B(void 0),r=B(void 0),E=B([]),P=B(""),O=S(()=>V.value?V.value.filter(t=>t.type==="function"||t.type==="event"):[]),p=S(()=>O.value.map(t=>({title:ue.from(t).format("minimal"),value:t}))),v=S(()=>{var t;return((t=r.value)==null?void 0:t.type)==="function"}),h=S(()=>{var t;return((t=r.value)==null?void 0:t.type)==="event"}),w=S(()=>{if(!r.value)return"mdi-cancel";const t=r.value;return t.type==="event"?"mdi-message-alert":t.stateMutability==="view"?"mdi-eye":t.stateMutability==="pure"?"mdi-calculator-variant-outline":t.stateMutability==="payable"?"mdi-cash":"mdi-cog-outline"}),R=S(()=>{if(!r.value)return!1;const t=r.value;return!(t.type==="event"||t.stateMutability==="view"||t.stateMutability==="pure"||t.stateMutability==="payable")});q(r,()=>{d.value={},P.value=""}),q(()=>s.address,async()=>{r.value=void 0,d.value={},V.value=await te(s.contract,s.address,n().currentProvider)}),re(async()=>{V.value=await te(s.contract,s.address,n().currentProvider)});async function W(){if(!r.value)return;console.log("Calling contract",R.value,s.address,`${s.contract}.${r.value.name}`,...Object.values(d.value));const t={icon:R.value?"mdi-test-tube":w.value,contract:s.contract,address:s.address,kind:"call",call:`${s.contract}.${r.value.name}( ${Object.values(d.value).join(", ")} )`,code:Ie(l.value,s.address,r.value,...Object.values(d.value))};try{const e=await Pe(n().currentProvider,s.address,r.value,...Object.values(d.value));console.log("Result",e),t.result=e}catch(e){"errorArgs"in e?t.error=e.errorArgs.join(" "):t.error=e.message}E.value.unshift(t)}async function F(){if(!r.value)return;console.log("Executing contract",s.address,`${s.contract}.${r.value.name}`,...Object.values(d.value));const t={icon:w.value,contract:s.contract,address:s.address,kind:"exec",call:`${s.contract}.${r.value.name}( ${Object.values(d.value).join(", ")} )`,code:we(l.value,s.address,r.value,...Object.values(d.value))};try{const e=await Se(n().currentProvider,s.address,r.value,...Object.values(d.value));console.log("Result",e),t.result=e}catch(e){"reason"in e?(t.error=e.reason,"method"in e&&(t.error+=` (method: ${e.method})`)):t.error=e.message}E.value.unshift(t)}async function j(){if(!r.value)return;console.log("Loading events",s.address,`${s.contract}.${r.value.name}`);const t={icon:w.value,contract:s.contract,address:s.address,kind:"event",call:`Event ${s.contract}.${r.value.name}()`,code:Be(l.value,s.address,r.value)};try{const e=await Ee(n().currentProvider,s.address,r.value);console.log("Result",e),t.result=e}catch(e){"reason"in e?(t.error=e.reason,"method"in e&&(t.error+=` (method: ${e.method})`)):t.error=e.message}E.value.unshift(t)}return(t,e)=>{const y=gt,g=Je,x=pt,M=ie;return o(),b(Y,null,{default:m(()=>[i(Ge,null,{default:m(()=>[A(" Contract "+I(s.contract),1)]),_:1}),i(Xe,null,{default:m(()=>[A(" located at "+I(s.address),1)]),_:1}),i(Z,null,{default:m(()=>[i(et,{items:f(p),modelValue:f(r),"onUpdate:modelValue":e[0]||(e[0]=C=>Q(r)?r.value=C:null),"prepend-inner-icon":f(w),clearable:""},null,8,["items","modelValue","prepend-inner-icon"]),f(v)?(o(),b(y,{key:0,item:f(r),modelValue:f(d),"onUpdate:modelValue":e[1]||(e[1]=C=>Q(d)?d.value=C:null)},null,8,["item","modelValue"])):$("",!0),f(r)?$("",!0):(o(),b(Vt,{key:1,type:"info",class:"ma-4"},{default:m(()=>e[2]||(e[2]=[A(" Select a function to display its parameters ")])),_:1}))]),_:1}),i(Ye,null,{default:m(()=>[i(at),f(h)?(o(),b(N,{key:0,color:"primary",onClick:j},{default:m(()=>e[3]||(e[3]=[A("List")])),_:1})):$("",!0),f(v)?(o(),b(N,{key:1,color:"primary",onClick:W},{default:m(()=>[A(I(f(R)?"Simulate":"Call"),1)]),_:1})):$("",!0),f(R)?(o(),b(N,{key:2,color:"primary",onClick:F},{default:m(()=>e[4]||(e[4]=[A("Execute")])),_:1})):$("",!0)]),_:1}),i(tt),f(P)?(o(),b(J,{key:0},{default:m(()=>[i(oe,null,{default:m(()=>[i(g,{text:f(P)},null,8,["text"])]),_:1})]),_:1})):$("",!0),i(X,null,{default:m(()=>[e[6]||(e[6]=_("thead",null,[_("tr",null,[_("th",null,"Call"),_("th",{class:"text-center"},"Result / Error")])],-1)),_("tbody",null,[(o(!0),k(U,null,D(f(E),(C,ce)=>(o(),k("tr",{key:ce},[_("td",Ct,[i(N,{icon:"mdi-code-braces-box",class:"mr-2",size:"x-small",onClick:de=>f(P)==C.code?P.value=void 0:P.value=C.code},null,8,["onClick"]),i(L,{class:"mr-2"},{default:m(()=>[A(I(C.icon),1)]),_:2},1024),A(" "+I(C.call)+" ",1),_("span",ht,[A(I(C.address)+" ",1),i(L,{class:"ml-2",onClick:de=>c(C)},{default:m(()=>e[5]||(e[5]=[A("mdi-open-in-app")])),_:2},1032,["onClick"])])]),C.result!=null?(o(),k("td",xt,[C.kind==="event"?(o(),b(x,{key:0,items:C.result,"onChange:target":c,headers:C.result.length>0},null,8,["items","headers"])):$("",!0),C.kind==="call"?(o(),b(M,{key:1,items:C.result,"onChange:target":c},null,8,["items"])):$("",!0),C.kind==="exec"?(o(),k("span",$t,I(C.result),1)):$("",!0)])):(o(),k("td",Tt,I(C.error),1))]))),128))])]),_:1})]),_:1})}}}),It=nt(At,[["__scopeId","data-v-6595579d"]]),Pt={key:0},Dt=z({__name:"interaction",setup(a){const T=Te(),n=B(""),l=B("");re(()=>{T.query.contract&&(n.value=T.query.contract),T.query.address&&(l.value=T.query.address),!n.value||!l.value?K().push("/get-started"):(K().replace({query:{}}),Re().includes(n.value)?console.log("Contract",n.value,"found"):(console.error("Contract",n.value,"not found"),K().push("/get-started")))});function s(u){console.log("Change target in interaction page",u),n.value=u.contract,l.value=u.address}return(u,c)=>f(n)&&f(l)?(o(),k("div",Pt,[i(It,{contract:f(n),address:f(l),"onChange:target":s},null,8,["contract","address"])])):$("",!0)}});export{Dt as default};
